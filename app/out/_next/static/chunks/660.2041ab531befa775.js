"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{20660:function(t,e,r){r.r(e),r.d(e,{default:function(){return me},isEIP712Message:function(){return ee},ledgerService:function(){return $t}});var n=r(40604),a=r(23961),o=r(30816).Buffer;function i(t){var e=[];return t.split("/").forEach((function(t){var r=parseInt(t,10);isNaN(r)||(t.length>1&&"'"===t[t.length-1]&&(r+=2147483648),e.push(r))})),e}function s(t){return o.from(t.startsWith("0x")?t.slice(2):t,"hex")}function u(t){return t?s(t):null}var l=function(t){var e,r=[1,2].includes(t[0])?t[0]:null,i=null===r?t:t.slice(1),s=(0,n.J)(i).map((function(t){return o.from(t.slice(2),"hex")})),u=0,l=(0,n.J)(i),c=(e=2===r?{data:l[7],to:l[5],chainId:s[0]}:1===r?{data:l[6],to:l[4],chainId:s[0]}:{data:l[5],to:l[3],chainId:s.length>6?s[6]:o.from("0x01","hex")}).chainId,h=new a.O(0);if(c){h=new a.O(c.toString("hex"),16);var f=o.alloc(4);c.length>4?c.copy(f):c.copy(f,4-c.length),u=f.readUInt32BE(0)}var p=0;if(null===r&&s.length>6){var d=o.from((0,n.c)(s.slice(-3)).slice(2),"hex");if(p=t.length-(d.length-1),d[0]>247)p++,p+=d[0]-247-1}return{decodedTx:e,txType:r,chainId:h,chainIdTruncated:u,vrsOffset:p}},c=function(t,e){return t.toString(16).padStart(2*e,"0")},h=r(98568),f=r(35897),p=r(3922),d=r(58540),g=r(10014),m=r(2677),y=r(63196),b=r(44398);const v="abi/5.7.0",w=new b.Yd(v);class E{constructor(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}_throwError(t,e){w.throwArgumentError(t,this.localName,e)}}class x{constructor(t){(0,y.zG)(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return(0,d.xs)(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData((0,d.zo)(t._data))}writeBytes(t){let e=(0,d.lE)(t);const r=e.length%this.wordSize;return r&&(e=(0,d.zo)([e,this._padding.slice(r)])),this._writeData(e)}_getValue(t){let e=(0,d.lE)(p.O$.from(t));return e.length>this.wordSize&&w.throwError("value out-of-bounds",b.Yd.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=(0,d.zo)([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class S{constructor(t,e,r,n){(0,y.zG)(this,"_data",(0,d.lE)(t)),(0,y.zG)(this,"wordSize",e||32),(0,y.zG)(this,"_coerceFunc",r),(0,y.zG)(this,"allowLoose",n),this._offset=0}get data(){return(0,d.Dv)(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):S.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:w.throwError("data out-of-bounds",b.Yd.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new S(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)}readValue(){return p.O$.from(this.readBytes(this.wordSize))}}class _ extends E{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=(0,f.Kn)(e)}catch(r){this._throwError(r.message,e)}return t.writeValue(e)}decode(t){return(0,f.Kn)((0,d.$m)(t.readValue().toHexString(),20))}}class A extends E{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const I=new b.Yd(v);function P(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"===typeof r){let t={};n=e.map((e=>{const n=e.localName;return n||I.throwError("cannot encode object for signature with missing names",b.Yd.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]&&I.throwError("cannot encode object for signature with duplicate names",b.Yd.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]=!0,r[n]}))}else I.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&I.throwArgumentError("types/value length mismatch","tuple",r);let a=new x(t.wordSize),o=new x(t.wordSize),i=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=o.length;t.encode(o,r);let n=a.writeUpdatableValue();i.push((t=>{n(t+e)}))}else t.encode(a,r)})),i.forEach((t=>{t(a.length)}));let s=t.appendWriter(a);return s+=t.appendWriter(o),s}function O(t,e){let r=[],n=t.subReader(0);e.forEach((e=>{let a=null;if(e.dynamic){let r=t.readValue(),i=n.subReader(r.toNumber());try{a=e.decode(i)}catch(o){if(o.code===b.Yd.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=e.name,a.name=e.localName,a.type=e.type}}else try{a=e.decode(t)}catch(o){if(o.code===b.Yd.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=e.name,a.name=e.localName,a.type=e.type}void 0!=a&&r.push(a)}));const a=e.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||1!==a[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[e];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o}));for(let o=0;o<r.length;o++){const t=r[o];t instanceof Error&&Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class T extends E{constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),I.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let a=0;a<e.length;a++)n.push(this.coder);return P(t,n,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&I.throwError("insufficient data length",b.Yd.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let r=[];for(let n=0;n<e;n++)r.push(new A(this.coder));return t.coerce(this.name,O(t,r))}}class k extends E{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class N extends E{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=(0,d.lE)(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class C extends N{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,(0,d.Dv)(super.decode(t)))}}class B extends E{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=(0,d.lE)(e);return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return t.coerce(this.name,(0,d.Dv)(t.readBytes(this.size)))}}class j extends E{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}var z=r(5733);class U extends E{constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let r=p.O$.from(e),n=z.Bz.mask(8*t.wordSize);if(this.signed){let t=n.mask(8*this.size-1);(r.gt(t)||r.lt(t.add(z.fh).mul(z.tL)))&&this._throwError("value out-of-bounds",e)}else(r.lt(z._Y)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}var M=r(52822);class R extends N{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,(0,M.Y0)(e))}decode(t){return(0,M.ZN)(super.decode(t))}}class F extends E{constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let a=r.localName;a&&1===e[a]&&("length"===a&&(a="_length"),null==t[a]&&(t[a]=t[n]))})),Object.freeze(t)}encode(t,e){return P(t,this.coders,e)}decode(t){return t.coerce(this.name,O(t,this.coders))}}const L=new b.Yd(v),V={};let D={calldata:!0,memory:!0,storage:!0},G={calldata:!0,memory:!0};function $(t,e){if("bytes"===t||"string"===t){if(D[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&G[e])return!0;return(D[e]||"payable"===e)&&L.throwArgumentError("invalid modifier","name",e),!1}function Y(t,e){for(let r in e)(0,y.zG)(t,r,e[r])}const J=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),W=new RegExp(/^(.*)\[([0-9]*)\]$/);class K{constructor(t,e){t!==V&&L.throwError("use fromString",b.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Y(this,e);let r=this.type.match(W);Y(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:K.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=J.sighash),J[t]||L.throwArgumentError("invalid format type","format",t),t===J.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==J.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===J.full?", ":",")+")"):e+=this.type,t!==J.sighash&&(!0===this.indexed&&(e+=" indexed"),t===J.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"===typeof t?K.fromString(t,e):K.fromObject(t)}static fromObject(t){return K.isParamType(t)?t:new K(V,{name:t.name||null,type:ot(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(K.fromObject):null})}static fromString(t,e){return r=function(t,e){let r=t;function n(e){L.throwArgumentError(`unexpected character at position ${e}`,"param",t)}function a(t){let r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},i=o;for(let s=0;s<t.length;s++){let r=t[s];switch(r){case"(":i.state.allowType&&""===i.type?i.type="tuple":i.state.allowParams||n(s),i.state.allowType=!1,i.type=ot(i.type),i.components=[a(i)],i=i.components[0];break;case")":delete i.state,"indexed"===i.name&&(e||n(s),i.indexed=!0,i.name=""),$(i.type,i.name)&&(i.name=""),i.type=ot(i.type);let t=i;i=i.parent,i||n(s),delete t.parent,i.state.allowParams=!1,i.state.allowName=!0,i.state.allowArray=!0;break;case",":delete i.state,"indexed"===i.name&&(e||n(s),i.indexed=!0,i.name=""),$(i.type,i.name)&&(i.name=""),i.type=ot(i.type);let o=a(i.parent);i.parent.components.push(o),delete i.parent,i=o;break;case" ":i.state.allowType&&""!==i.type&&(i.type=ot(i.type),delete i.state.allowType,i.state.allowName=!0,i.state.allowParams=!0),i.state.allowName&&""!==i.name&&("indexed"===i.name?(e||n(s),i.indexed&&n(s),i.indexed=!0,i.name=""):$(i.type,i.name)?i.name="":i.state.allowName=!1);break;case"[":i.state.allowArray||n(s),i.type+=r,i.state.allowArray=!1,i.state.allowName=!1,i.state.readArray=!0;break;case"]":i.state.readArray||n(s),i.type+=r,i.state.readArray=!1,i.state.allowArray=!0,i.state.allowName=!0;break;default:i.state.allowType?(i.type+=r,i.state.allowParams=!0,i.state.allowArray=!0):i.state.allowName?(i.name+=r,delete i.state.allowArray):i.state.readArray?i.type+=r:n(s)}}return i.parent&&L.throwArgumentError("unexpected eof","param",t),delete o.state,"indexed"===i.name?(e||n(r.length-7),i.indexed&&n(r.length-7),i.indexed=!0,i.name=""):$(i.type,i.name)&&(i.name=""),o.type=ot(o.type),o}(t,!!e),K.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(t){return!(null==t||!t._isParamType)}}function H(t,e){return function(t){t=t.trim();let e=[],r="",n=0;for(let a=0;a<t.length;a++){let o=t[a];","===o&&0===n?(e.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&L.throwArgumentError("unbalanced parenthesis","value",t)))}r&&e.push(r);return e}(t).map((t=>K.fromString(t,e)))}class Q{constructor(t,e){t!==V&&L.throwError("use a static from method",b.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Y(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return Q.isFragment(t)?t:"string"===typeof t?Q.fromString(t):Q.fromObject(t)}static fromObject(t){if(Q.isFragment(t))return t;switch(t.type){case"function":return rt.fromObject(t);case"event":return q.fromObject(t);case"constructor":return et.fromObject(t);case"error":return at.fromObject(t);case"fallback":case"receive":return null}return L.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?q.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?rt.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?et.fromString(t.trim()):"error"===t.split(" ")[0]?at.fromString(t.substring(5).trim()):L.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class q extends Q{format(t){if(t||(t=J.sighash),J[t]||L.throwArgumentError("invalid format type","format",t),t===J.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==J.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===J.full?", ":",")+") ",t!==J.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"===typeof t?q.fromString(t):q.fromObject(t)}static fromObject(t){if(q.isEventFragment(t))return t;"event"!==t.type&&L.throwArgumentError("invalid event object","value",t);const e={name:st(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(K.fromObject):[],type:"event"};return new q(V,e)}static fromString(t){let e=t.match(ut);e||L.throwArgumentError("invalid event string","value",t);let r=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:L.warn("unknown modifier: "+t)}})),q.fromObject({name:e[1].trim(),anonymous:r,inputs:H(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function X(t,e){e.gas=null;let r=t.split("@");return 1!==r.length?(r.length>2&&L.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||L.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=p.O$.from(r[1]),r[0]):t}function Z(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function tt(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&L.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&L.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||L.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&L.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&L.throwArgumentError("unable to determine stateMutability","value",t),e}class et extends Q{format(t){if(t||(t=J.sighash),J[t]||L.throwArgumentError("invalid format type","format",t),t===J.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===J.sighash&&L.throwError("cannot format a constructor for sighash",b.Yd.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===J.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"===typeof t?et.fromString(t):et.fromObject(t)}static fromObject(t){if(et.isConstructorFragment(t))return t;"constructor"!==t.type&&L.throwArgumentError("invalid constructor object","value",t);let e=tt(t);e.constant&&L.throwArgumentError("constructor cannot be constant","value",t);const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(K.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?p.O$.from(t.gas):null};return new et(V,r)}static fromString(t){let e={type:"constructor"},r=(t=X(t,e)).match(ut);return r&&"constructor"===r[1].trim()||L.throwArgumentError("invalid constructor string","value",t),e.inputs=H(r[2].trim(),!1),Z(r[3].trim(),e),et.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class rt extends et{format(t){if(t||(t=J.sighash),J[t]||L.throwArgumentError("invalid format type","format",t),t===J.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==J.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===J.full?", ":",")+") ",t!==J.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"===typeof t?rt.fromString(t):rt.fromObject(t)}static fromObject(t){if(rt.isFunctionFragment(t))return t;"function"!==t.type&&L.throwArgumentError("invalid function object","value",t);let e=tt(t);const r={type:t.type,name:st(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(K.fromObject):[],outputs:t.outputs?t.outputs.map(K.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?p.O$.from(t.gas):null};return new rt(V,r)}static fromString(t){let e={type:"function"},r=(t=X(t,e)).split(" returns ");r.length>2&&L.throwArgumentError("invalid function string","value",t);let n=r[0].match(ut);if(n||L.throwArgumentError("invalid function signature","value",t),e.name=n[1].trim(),e.name&&st(e.name),e.inputs=H(n[2],!1),Z(n[3].trim(),e),r.length>1){let n=r[1].match(ut);""==n[1].trim()&&""==n[3].trim()||L.throwArgumentError("unexpected tokens","value",t),e.outputs=H(n[2],!1)}else e.outputs=[];return rt.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function nt(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||L.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class at extends Q{format(t){if(t||(t=J.sighash),J[t]||L.throwArgumentError("invalid format type","format",t),t===J.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==J.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===J.full?", ":",")+") ",e.trim()}static from(t){return"string"===typeof t?at.fromString(t):at.fromObject(t)}static fromObject(t){if(at.isErrorFragment(t))return t;"error"!==t.type&&L.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:st(t.name),inputs:t.inputs?t.inputs.map(K.fromObject):[]};return nt(new at(V,e))}static fromString(t){let e={type:"error"},r=t.match(ut);return r||L.throwArgumentError("invalid error signature","value",t),e.name=r[1].trim(),e.name&&st(e.name),e.inputs=H(r[2],!1),nt(at.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function ot(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const it=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function st(t){return t&&t.match(it)||L.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const ut=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const lt=new b.Yd(v),ct=new RegExp(/^bytes([0-9]*)$/),ht=new RegExp(/^(u?int)([0-9]*)$/);const ft=new class{constructor(t){(0,y.zG)(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new _(t.name);case"bool":return new k(t.name);case"string":return new R(t.name);case"bytes":return new C(t.name);case"array":return new T(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new F((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new j(t.name)}let e=t.type.match(ht);if(e){let r=parseInt(e[2]||"256");return(0===r||r>256||r%8!==0)&&lt.throwArgumentError("invalid "+e[1]+" bit length","param",t),new U(r/8,"int"===e[1],t.name)}if(e=t.type.match(ct),e){let r=parseInt(e[1]);return(0===r||r>32)&&lt.throwArgumentError("invalid bytes length","param",t),new B(r,t.name)}return lt.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new S(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new x(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(K.from(t))));return new F(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&lt.throwError("types/values length mismatch",b.Yd.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const r=t.map((t=>this._getCoder(K.from(t)))),n=new F(r,"_"),a=this._getWriter();return n.encode(a,e),a.data}decode(t,e,r){const n=t.map((t=>this._getCoder(K.from(t))));return new F(n,"_").decode(this._getReader((0,d.lE)(e),r))}},pt=new b.Yd(v);class dt extends y.dk{}class gt extends y.dk{}class mt extends y.dk{}class yt extends y.dk{static isIndexed(t){return!(!t||!t._isIndexed)}}const bt={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function vt(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class wt{constructor(t){let e=[];e="string"===typeof t?JSON.parse(t):t,(0,y.zG)(this,"fragments",e.map((t=>Q.from(t))).filter((t=>null!=t))),(0,y.zG)(this,"_abiCoder",(0,y.tu)(new.target,"getAbiCoder")()),(0,y.zG)(this,"functions",{}),(0,y.zG)(this,"errors",{}),(0,y.zG)(this,"events",{}),(0,y.zG)(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void pt.warn("duplicate definition - constructor"):void(0,y.zG)(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let r=t.format();e[r]?pt.warn("duplicate definition - "+r):e[r]=t})),this.deploy||(0,y.zG)(this,"deploy",et.from({payable:!1,type:"constructor"})),(0,y.zG)(this,"_isInterface",!0)}format(t){t||(t=J.full),t===J.sighash&&pt.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===J.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return ft}static getAddress(t){return(0,f.Kn)(t)}static getSighash(t){return(0,d.p3)((0,g.id)(t.format()),0,4)}static getEventTopic(t){return(0,g.id)(t.format())}getFunction(t){if((0,d.A7)(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];pt.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===r.length?pt.throwArgumentError("no matching function","name",e):r.length>1&&pt.throwArgumentError("multiple matching functions","name",e),this.functions[r[0]]}const e=this.functions[rt.fromString(t).format()];return e||pt.throwArgumentError("no matching function","signature",t),e}getEvent(t){if((0,d.A7)(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];pt.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===r.length?pt.throwArgumentError("no matching event","name",e):r.length>1&&pt.throwArgumentError("multiple matching events","name",e),this.events[r[0]]}const e=this.events[q.fromString(t).format()];return e||pt.throwArgumentError("no matching event","signature",t),e}getError(t){if((0,d.A7)(t)){const e=(0,y.tu)(this.constructor,"getSighash");for(const r in this.errors){if(t===e(this.errors[r]))return this.errors[r]}pt.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===r.length?pt.throwArgumentError("no matching error","name",e):r.length>1&&pt.throwArgumentError("multiple matching errors","name",e),this.errors[r[0]]}const e=this.errors[rt.fromString(t).format()];return e||pt.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"===typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(r){throw e}}return(0,y.tu)(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"===typeof t&&(t=this.getEvent(t)),(0,y.tu)(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"===typeof t&&(t=this.getError(t));const r=(0,d.lE)(e);return(0,d.Dv)(r.slice(0,4))!==this.getSighash(t)&&pt.throwArgumentError(`data signature does not match error ${t.name}.`,"data",(0,d.Dv)(r)),this._decodeParams(t.inputs,r.slice(4))}encodeErrorResult(t,e){return"string"===typeof t&&(t=this.getError(t)),(0,d.Dv)((0,d.zo)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"===typeof t&&(t=this.getFunction(t));const r=(0,d.lE)(e);return(0,d.Dv)(r.slice(0,4))!==this.getSighash(t)&&pt.throwArgumentError(`data signature does not match function ${t.name}.`,"data",(0,d.Dv)(r)),this._decodeParams(t.inputs,r.slice(4))}encodeFunctionData(t,e){return"string"===typeof t&&(t=this.getFunction(t)),(0,d.Dv)((0,d.zo)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"===typeof t&&(t=this.getFunction(t));let r=(0,d.lE)(e),n=null,a="",o=null,i=null,s=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,r)}catch(u){}break;case 4:{const t=(0,d.Dv)(r.slice(0,4)),e=bt[t];if(e)o=this._abiCoder.decode(e.inputs,r.slice(4)),i=e.name,s=e.signature,e.reason&&(n=o[0]),"Error"===i?a=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:"Panic"===i&&(a=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const e=this.getError(t);o=this._abiCoder.decode(e.inputs,r.slice(4)),i=e.name,s=e.format()}catch(u){}break}}return pt.throwError("call revert exception"+a,b.Yd.errors.CALL_EXCEPTION,{method:t.format(),data:(0,d.Dv)(e),errorArgs:o,errorName:i,errorSignature:s,reason:n})}encodeFunctionResult(t,e){return"string"===typeof t&&(t=this.getFunction(t)),(0,d.Dv)(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"===typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&pt.throwError("too many arguments for "+t.format(),b.Yd.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let r=[];t.anonymous||r.push(this.getEventTopic(t));const n=(t,e)=>"string"===t.type?(0,g.id)(e):"bytes"===t.type?(0,m.w)((0,d.Dv)(e)):("bool"===t.type&&"boolean"===typeof e&&(e=e?"0x01":"0x00"),t.type.match(/^u?int/)&&(e=p.O$.from(e).toHexString()),"address"===t.type&&this._abiCoder.encode(["address"],[e]),(0,d.$m)((0,d.Dv)(e),32));for(e.forEach(((e,a)=>{let o=t.inputs[a];o.indexed?null==e?r.push(null):"array"===o.baseType||"tuple"===o.baseType?pt.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,e):Array.isArray(e)?r.push(e.map((t=>n(o,t)))):r.push(n(o,e)):null!=e&&pt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){"string"===typeof t&&(t=this.getEvent(t));const r=[],n=[],a=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&pt.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,o)=>{const i=e[o];if(t.indexed)if("string"===t.type)r.push((0,g.id)(i));else if("bytes"===t.type)r.push((0,m.w)(i));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([t.type],[i]))}else n.push(t),a.push(i)})),{data:this._abiCoder.encode(n,a),topics:r}}decodeEventLog(t,e,r){if("string"===typeof t&&(t=this.getEvent(t)),null!=r&&!t.anonymous){let e=this.getEventTopic(t);(0,d.A7)(r[0],32)&&r[0].toLowerCase()===e||pt.throwError("fragment/topic mismatch",b.Yd.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:r[0]}),r=r.slice(1)}let n=[],a=[],o=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(K.fromObject({type:"bytes32",name:t.name})),o.push(!0)):(n.push(t),o.push(!1)):(a.push(t),o.push(!1))}));let i=null!=r?this._abiCoder.decode(n,(0,d.zo)(r)):null,s=this._abiCoder.decode(a,e,!0),u=[],l=0,c=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==i)u[e]=new yt({_isIndexed:!0,hash:null});else if(o[e])u[e]=new yt({_isIndexed:!0,hash:i[c++]});else try{u[e]=i[c++]}catch(r){u[e]=r}else try{u[e]=s[l++]}catch(r){u[e]=r}if(t.name&&null==u[t.name]){const r=u[e];r instanceof Error?Object.defineProperty(u,t.name,{enumerable:!0,get:()=>{throw vt(`property ${JSON.stringify(t.name)}`,r)}}):u[t.name]=r}}));for(let h=0;h<u.length;h++){const t=u[h];t instanceof Error&&Object.defineProperty(u,h,{enumerable:!0,get:()=>{throw vt(`index ${h}`,t)}})}return Object.freeze(u)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new gt({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:p.O$.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new dt({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=(0,d.Dv)(t);let r=this.getError(e.substring(0,10).toLowerCase());return r?new mt({args:this._abiCoder.decode(r.inputs,"0x"+e.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(t){return!(!t||!t._isInterface)}}var Et=r(14206),xt=r.n(Et),St=function(){return St=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},St.apply(this,arguments)},_t={nftExplorerBaseURL:null,pluginBaseURL:"https://cdn.live.ledger.com",extraPlugins:null};function At(t){return St(St({},_t),t)}var It=function(){return It=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},It.apply(this,arguments)},Pt=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},Ot=function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Tt=function(t,e,r,n){return Pt(void 0,void 0,void 0,(function(){var r,a,o,i,s,u,l,c;return Ot(this,(function(f){switch(f.label){case 0:return r=At(n),a=r.pluginBaseURL,o=r.extraPlugins,i={},a?(s="".concat(a,"/plugins/ethereum.json"),[4,xt().get("".concat(a,"/plugins/ethereum.json")).then((function(t){return t.data})).catch((function(t){return(0,h.c)("error","could not fetch from "+s+": "+String(t)),null}))]):[3,2];case 1:i=f.sent(),f.label=2;case 2:return o&&(i=It(It({},i),o)),i?(u=e.toLowerCase(),(l=t.toLowerCase())in i&&(c=i[l],u in c)?[2,{payload:c[u].serialized_data,signature:c[u].signature,plugin:c[u].plugin,erc20OfInterest:c[u].erc20OfInterest,abi:c.abi}]:[2]):[2]}}))}))},kt=r(42211),Nt=r.n(kt),Ct=r(30816).Buffer,Bt=function(t){var e=t.toLowerCase();return e.startsWith("0x")?e:"0x"+e},jt=function(){var t;return function(){if(t)return t;for(var e=Ct.from(Nt(),"base64"),r={},n=[],a=0;a<e.length;){var o=e.readUInt32BE(a);a+=4;var i=e.slice(a,a+o),s=0,u=i.readUInt8(s);s+=1;var l=i.slice(s,s+u).toString("ascii");s+=u;var c=Bt(i.slice(s,s+20).toString("hex"));s+=20;var h=i.readUInt32BE(s);s+=4;var f=i.readUInt32BE(s);s+=4;var p={ticker:l,contractAddress:c,decimals:h,chainId:f,signature:i.slice(s),data:i};n.push(p),r[String(f)+":"+c]=p,a+=o}var d={list:function(){return n},byContractAndChainId:function(t,e){return r[String(e)+":"+t]}};return t=d,d}}(),zt=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},Ut=function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function Mt(t){if(!t||!t.status)throw t;if(404===t.status)return null;throw t}var Rt,Ft=function(t,e,r,n){return zt(void 0,void 0,void 0,(function(){var a,o,i;return Ut(this,(function(s){switch(s.label){case 0:return(a=At(n).nftExplorerBaseURL)?(o="".concat(a,"/").concat(r,"/contracts/").concat(t,"/plugin-selector/").concat(e),[4,xt().get(o).then((function(t){return t.data})).catch(Mt)]):[2];case 1:return(i=s.sent())?[2,i.payload]:[2]}}))}))},Lt=r(30816).Buffer,Vt=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},Dt=function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Gt=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$t={resolveTransaction:function(t,e,r){return Vt(void 0,void 0,void 0,(function(){var n,a,o,i,s,u,c,f,p,d,g,m,y,b,v,w,E,x,S,_,A,I,P,O,T;return Dt(this,(function(k){switch(k.label){case 0:return n={erc20Tokens:[],nfts:[],externalPlugin:[],plugin:[]},a=Lt.from(t,"hex"),o=l(a),i=o.decodedTx,s=o.chainIdTruncated,u=function(t){return Vt(void 0,void 0,void 0,(function(){var a,o,i;return Dt(this,(function(u){switch(u.label){case 0:return r.nft?[4,(c=t,f=s,p=e,zt(void 0,void 0,void 0,(function(){var t,e,r,n,a,o,i,s;return Ut(this,(function(u){switch(u.label){case 0:return(t=At(p).nftExplorerBaseURL)?(e="".concat(t,"/").concat(f,"/contracts/").concat(c),[4,xt().get(e).then((function(t){return t.data})).catch(Mt)]):[2];case 1:return(r=u.sent())?(n=r.payload,a=parseInt(n.slice(4,6),16),o=n.substr(6,2*a),i=null===(s=o.match(/.{2}/g))||void 0===s?void 0:s.reduce((function(t,e){return t+String.fromCharCode(parseInt(e,16))}),""),[2,{contractAddress:c,collectionName:i||"",data:n}]):[2]}}))})))]:[3,2];case 1:return o=u.sent(),[3,3];case 2:o=null,u.label=3;case 3:return(a=o)?((0,h.c)("ethereum","loaded nft info for "+a.contractAddress+" ("+a.collectionName+")"),l=a.data,n.nfts.push(l)):(i=function(t,e){return jt().byContractAndChainId(Bt(t),e)}(t,s),i&&((0,h.c)("ethereum","loaded erc20token info for "+i.contractAddress+" ("+i.ticker+")"),function(t){n.erc20Tokens.push(t)}(i.data.toString("hex")))),[2]}var l,c,f,p}))}))},i.data.length>=10?(c=i.data.substring(0,10),r.nft?[4,Ft(i.to,c,s,e)]:[3,2]):[3,19];case 1:return p=k.sent(),[3,3];case 2:p=null,k.label=3;case 3:return(f=p)?(N=f,n.plugin.push(N),[3,17]):[3,4];case 4:return r.externalPlugins?[4,Tt(i.to,c,0,e)]:[3,6];case 5:return g=k.sent(),[3,7];case 6:g=null,k.label=7;case 7:if(!(d=g))return[3,16];if(m=d.plugin,y=d.payload,b=d.signature,v=d.erc20OfInterest,w=d.abi,m&&((0,h.c)("ethereum","found plugin for "+c),function(t,e){n.externalPlugin.push({payload:t,signature:e})}(y,b)),!(v&&v.length&&w))return[3,15];E=new wt(w),x=E.parseTransaction(i).args,k.label=8;case 8:k.trys.push([8,13,14,15]),S=Gt(v),_=S.next(),k.label=9;case 9:return _.done?[3,12]:(A=_.value,I=A.split(".").reduce((function(t,e){return"-1"===e&&Array.isArray(t)?t[t.length-1]:t[e]}),x),[4,u(I)]);case 10:k.sent(),k.label=11;case 11:return _=S.next(),[3,9];case 12:return[3,15];case 13:return P=k.sent(),O={error:P},[3,15];case 14:try{_&&!_.done&&(T=S.return)&&T.call(S)}finally{if(O)throw O.error}return[7];case 15:return[3,17];case 16:(0,h.c)("ethereum","no infos for selector "+c),k.label=17;case 17:return[4,u(i.to)];case 18:k.sent(),k.label=19;case 19:return[2,n]}var N}))}))}},Yt=r(9999),Jt=(0,Yt.el)("EthAppPleaseEnableContractData"),Wt=(0,Yt.el)("EthAppNftNotSupported"),Kt=r(30816).Buffer,Ht=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},Qt=function(t,e,r){if(r||2===arguments.length)for(var n,a=0,o=e.length;a<o;a++)!n&&a in e||(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))};!function(t){t[t.DYNAMIC=0]="DYNAMIC",t[t.FIXED=1]="FIXED"}(Rt||(Rt={}));var qt={CUSTOM:{key:function(){return 0},sizeInBits:function(){return null}},INT:{key:function(){return 1},sizeInBits:function(t){return Number(t)/8}},UINT:{key:function(){return 2},sizeInBits:function(t){return Number(t)/8}},ADDRESS:{key:function(){return 3},sizeInBits:function(){return null}},BOOL:{key:function(){return 4},sizeInBits:function(){return null}},STRING:{key:function(){return 5},sizeInBits:function(){return null}},BYTES:{key:function(t){return"undefined"!==typeof t?6:7},sizeInBits:function(t){return"undefined"!==typeof t?Number(t):null}}},Xt={INT:function(t){var e=null!==t&&void 0!==t?t:0;if("string"===typeof e&&(null===e||void 0===e?void 0:e.startsWith("0x")))return s(e);var r=("string"===typeof e?parseInt(e,10):e).toString(16),n=r.length%2?"0"+r:r;return Kt.from(n,"hex")},UINT:function(t){return this.INT(t)},BOOL:function(t){return this.INT("boolean"===typeof t?Number(t):t)},ADDRESS:function(t){return s(null!==t&&void 0!==t?t:"").slice(0,20)},STRING:function(t){return Kt.from(null!==t&&void 0!==t?t:"","utf-8")},BYTES:function(t,e){var r=null!==t&&void 0!==t?t:"";return s(r).slice(0,null!==e&&void 0!==e?e:((null===r||void 0===r?void 0:r.length)-2)/2)}},Zt=function(t){var e=new RegExp(/^([^[\]]*)(\[.*\])*/g),r=new RegExp(/\[(\d*)\]/g),n=new RegExp(/(\D*)(\d*)/),a=Ht(e.exec(t||"")||[],3),o=a[1],i=a[2],s=Ht(n.exec(o||"")||[],3),u=s[1],l=s[2],c=u?{name:u,bits:l?Number(l):void 0}:null,h=(i?Qt([],Ht(i.matchAll(r)),!1):[]).map((function(t){var e=Ht(t,2)[1];return e?Number(e):null}));return[c,h]},te=function(t){var e,r,n,a,o=t.name,i=t.type,s=Ht(Zt(i),2),u=s[0],l=s[1],h=Boolean(l.length),f=qt[(null===(e=null===u||void 0===u?void 0:u.name)||void 0===e?void 0:e.toUpperCase())||""]||qt.CUSTOM,p=f.key(null===u||void 0===u?void 0:u.bits),d=f.sizeInBits(null===u||void 0===u?void 0:u.bits),g=function(t,e,r){if(r>=16)throw new Error("Eth utils - constructTypeDescByteString - Cannot accept a typeValue >= 16 because the typeValue can only be 4 bits in binary"+{isArray:t,typeSize:e,typeValue:r});var n=t?"1":"0",a="number"===typeof e?"1":"0",o=r.toString(2).padStart(4,"0");return c(parseInt(n+a+"00"+o,2),1)}(h,d,p),m=[Kt.from(g,"hex")];return f===qt.CUSTOM&&(m.push(Kt.from(c(null!==(n=null===(r=null===u||void 0===u?void 0:u.name)||void 0===r?void 0:r.length)&&void 0!==n?n:0,1),"hex")),m.push(Kt.from(null!==(a=null===u||void 0===u?void 0:u.name)&&void 0!==a?a:"","utf-8"))),"number"===typeof d&&m.push(Kt.from(c(d,1),"hex")),h&&(m.push(Kt.from(c(l.length,1),"hex")),l.forEach((function(t){"number"===typeof t?m.push(Kt.from(c(Rt.FIXED,1),"hex"),Kt.from(c(t,1),"hex")):m.push(Kt.from(c(Rt.DYNAMIC,1),"hex"))}))),m.push(Kt.from(c(o.length,1),"hex"),Kt.from(o,"utf-8")),Kt.concat(m)};function ee(t){return"types"in t&&"primaryType"in t&&"domain"in t&&"message"in t}var re=r(30816).Buffer,ne=function(){return ne=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},ne.apply(this,arguments)},ae=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},oe=function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ie=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},se=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=function(t,e){var r;!function(t){t[t.CLA=224]="CLA",t[t.INS=26]="INS",t[t.P1_complete=0]="P1_complete",t[t.P1_partial=1]="P1_partial",t[t.P2_name=0]="P2_name",t[t.P2_field=255]="P2_field"}(r||(r={}));var n=e.structType,a=e.value,o="name"===n&&"string"===typeof a?re.from(a,"utf-8"):a;return t.send(r.CLA,r.INS,r.P1_complete,"name"===n?r.P2_name:r.P2_field,o)},le=function(t,e){return ae(void 0,void 0,void 0,(function(){var r,n,a,o,i,s,u,l,h,f,p,d,g,m,y,b,v,w;return oe(this,(function(E){switch(E.label){case 0:if(function(t){t[t.CLA=224]="CLA",t[t.INS=28]="INS",t[t.P1_complete=0]="P1_complete",t[t.P1_partial=1]="P1_partial",t[t.P2_root=0]="P2_root",t[t.P2_array=15]="P2_array",t[t.P2_field=255]="P2_field"}(r||(r={})),n=e.structType,a=e.value,"root"===n)return[2,t.send(r.CLA,r.INS,r.P1_complete,r.P2_root,re.from(a,"utf-8"))];if("array"===n)return[2,t.send(r.CLA,r.INS,r.P1_complete,r.P2_array,re.from(c(a,1),"hex"))];if("field"!==n)return[3,8];if(o=a.data,i=a.type,s=a.sizeInBits,!(u=null===(w=Xt[i.toUpperCase()])||void 0===w?void 0:w.call(Xt,o,s)))return[3,8];l=Math.floor(u.length/256),h=u.length%256,f=re.concat([re.from(c(l,1),"hex"),re.from(c(h,1),"hex"),u]),p=new Array(Math.ceil(f.length/256)).fill(null).map((function(t,e){return f.slice(255*e,255*(e+1))})),E.label=1;case 1:E.trys.push([1,6,7,8]),d=se(p),g=d.next(),E.label=2;case 2:return g.done?[3,5]:(m=g.value,[4,t.send(r.CLA,r.INS,m!==p[p.length-1]?r.P1_partial:r.P1_complete,r.P2_field,m)]);case 3:E.sent(),E.label=4;case 4:return g=d.next(),[3,2];case 5:return[3,8];case 6:return y=E.sent(),b={error:y},[3,8];case 7:try{g&&!g.done&&(v=d.return)&&v.call(d)}finally{if(b)throw b.error}return[7];case 8:return[2,Promise.resolve()]}}))}))},ce=function(t,e,r,n){return void 0===n&&(n=!1),ae(void 0,void 0,void 0,(function(){var a,o,s,u,l,c,h,f,p,d,g,m,y,b,v,w,E,x,S,_,A,I,P,O,T,k,N,C,B,j,z,U,M,R,F,L,V,D,G,$,Y,J,W,K,H;return oe(this,(function(Q){switch(Q.label){case 0:!function(t){t[t.CLA=224]="CLA",t[t.INS=12]="INS",t[t.P1=0]="P1",t[t.P2_v0=0]="P2_v0",t[t.P2_full=1]="P2_full"}(a||(a={})),o=r.primaryType,s=r.types,u=r.domain,l=r.message,c=Object.entries(s),Q.label=1;case 1:Q.trys.push([1,13,14,15]),h=se(c),f=h.next(),Q.label=2;case 2:return f.done?[3,12]:(p=ie(f.value,2),d=p[0],g=p[1],[4,ue(t,{structType:"name",value:d})]);case 3:Q.sent(),Q.label=4;case 4:Q.trys.push([4,9,10,11]),$=void 0,m=se(g),y=m.next(),Q.label=5;case 5:return y.done?[3,8]:(b=y.value,v=b.name,M=b.type,w=te({name:v,type:M}),[4,ue(t,{structType:"field",value:w})]);case 6:Q.sent(),Q.label=7;case 7:return y=m.next(),[3,5];case 8:return[3,11];case 9:return E=Q.sent(),$={error:E},[3,11];case 10:try{y&&!y.done&&(Y=m.return)&&Y.call(m)}finally{if($)throw $.error}return[7];case 11:return f=h.next(),[3,2];case 12:return[3,15];case 13:return x=Q.sent(),D={error:x},[3,15];case 14:try{f&&!f.done&&(G=h.return)&&G.call(h)}finally{if(D)throw D.error}return[7];case 15:return S=function(t,e){var r,n={};for(var a in e)n[a]=null===(r=e[a])||void 0===r?void 0:r.reduce((function(t,e){var r;return ne(ne({},t),((r={})[e.name]=e.type,r))}),{});var o=function(e,r){return ae(void 0,void 0,void 0,(function(){var a,i,s,u,l,c,h,f,p,d,g,m,y,b,v,w,E,x,S,_,A,I,P;return oe(this,(function(O){switch(O.label){case 0:return a=ie(e,2),i=a[0],s=a[1],u=ie(s),l=u[0],c=u.slice(1),h=!qt[(null===(P=null===i||void 0===i?void 0:i.name)||void 0===P?void 0:P.toUpperCase())||""],Array.isArray(r)&&"undefined"!==typeof l?[4,le(t,{structType:"array",value:r.length})]:[3,10];case 1:O.sent(),O.label=2;case 2:O.trys.push([2,7,8,9]),f=se(r),p=f.next(),O.label=3;case 3:return p.done?[3,6]:(d=p.value,[4,o([i,c],d)]);case 4:O.sent(),O.label=5;case 5:return p=f.next(),[3,3];case 6:return[3,9];case 7:return g=O.sent(),S={error:g},[3,9];case 8:try{p&&!p.done&&(_=f.return)&&_.call(f)}finally{if(S)throw S.error}return[7];case 9:return[3,21];case 10:if(!h)return[3,19];O.label=11;case 11:O.trys.push([11,16,17,18]),m=se(Object.entries(r)),y=m.next(),O.label=12;case 12:return y.done?[3,15]:(b=ie(y.value,2),v=b[0],w=b[1],(E=null===n||void 0===n?void 0:n[(null===i||void 0===i?void 0:i.name)||""][v])?[4,o(Zt(E),w)]:[3,14]);case 13:O.sent(),O.label=14;case 14:return y=m.next(),[3,12];case 15:return[3,18];case 16:return x=O.sent(),A={error:x},[3,18];case 17:try{y&&!y.done&&(I=m.return)&&I.call(m)}finally{if(A)throw A.error}return[7];case 18:return[3,21];case 19:return[4,le(t,{structType:"field",value:{data:r,type:(null===i||void 0===i?void 0:i.name)||"",sizeInBits:null===i||void 0===i?void 0:i.bits}})];case 20:O.sent(),O.label=21;case 21:return[2]}}))}))};return o}(t,s),[4,le(t,{structType:"root",value:_="EIP712Domain"})];case 16:Q.sent(),A=s[_],Q.label=17;case 17:Q.trys.push([17,22,23,24]),I=se(A),P=I.next(),Q.label=18;case 18:return P.done?[3,21]:(O=P.value,T=O.name,M=O.type,k=u[T],[4,S(Zt(M),k)]);case 19:Q.sent(),Q.label=20;case 20:return P=I.next(),[3,18];case 21:return[3,24];case 22:return N=Q.sent(),J={error:N},[3,24];case 23:try{P&&!P.done&&(W=I.return)&&W.call(I)}finally{if(J)throw J.error}return[7];case 24:return[4,le(t,{structType:"root",value:o})];case 25:Q.sent(),C=s[o],Q.label=26;case 26:Q.trys.push([26,31,32,33]),B=se(C),j=B.next(),Q.label=27;case 27:return j.done?[3,30]:(z=j.value,U=z.name,M=z.type,R=l[U],[4,S(Zt(M),R)]);case 28:Q.sent(),Q.label=29;case 29:return j=B.next(),[3,27];case 30:return[3,33];case 31:return F=Q.sent(),K={error:F},[3,33];case 32:try{j&&!j.done&&(H=B.return)&&H.call(B)}finally{if(K)throw K.error}return[7];case 33:return L=i(e),(V=re.alloc(1+4*L.length))[0]=L.length,L.forEach((function(t,e){V.writeUInt32BE(t,1+4*e)})),[2,t.send(a.CLA,a.INS,a.P1,n?a.P2_v0:a.P2_full,V).then((function(t){return{v:t[0],r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))]}}))}))},he=r(30816).Buffer,fe=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},pe=function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},de=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ge={eth:1,erc20:2,erc721:3,erc20mintable:4,erc721mintable:5},me=function(){function t(t,e,r){void 0===e&&(e="w0w"),void 0===r&&(r={}),this.transport=t,this.loadConfig=r,t.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","signEIP712Message","signEIP712HashedMessage","starkGetPublicKey","starkSignOrder","starkSignOrder_v2","starkSignTransfer","starkSignTransfer_v2","starkProvideQuantum","starkProvideQuantum_v2","starkUnsafeSign","eth2GetPublicKey","eth2SetWithdrawalIndex","setExternalPlugin","setPlugin","getEIP1024PublicEncryptionKey","getEIP1024SharedSecret"],e)}return t.prototype.setLoadConfig=function(t){this.loadConfig=t},t.prototype.getAddress=function(t,e,r){var n=i(t),a=he.alloc(1+4*n.length);return a[0]=n.length,n.forEach((function(t,e){a.writeUInt32BE(t,1+4*e)})),this.transport.send(224,2,e?1:0,r?1:0,a).then((function(t){var e=t[0],n=t[1+e];return{publicKey:t.slice(1,1+e).toString("hex"),address:"0x"+t.slice(1+e+1,1+e+1+n).toString("ascii"),chainCode:r?t.slice(1+e+1+n,1+e+1+n+32).toString("hex"):void 0}}))},t.prototype.signTransaction=function(t,e,r){return fe(this,void 0,void 0,(function(){var n,a,o,s,u,c,h,f,p,d,g,m,y,b,v,w,E,x,S,_,A,I,P,O,T,k,N,C,B,j,z,U,M,R,F,L,V,D,G,$,Y,J,W;return pe(this,(function(K){switch(K.label){case 0:return void 0!==r?[3,2]:(console.warn("hw-app-eth: signTransaction(path, rawTxHex, resolution): please provide the 'resolution' parameter. See https://github.com/LedgerHQ/ledgerjs/blob/master/packages/hw-app-eth/README.md \u2013 the previous signature is deprecated and providing the 3rd 'resolution' parameter explicitly will become mandatory so you have the control on the resolution and the fallback mecanism (e.g. fallback to blind signing or not).// Possible solution:\n + import { ledgerService } from '@ledgerhq/hw-app-eth';\n + const resolution = await ledgerService.resolveTransaction(rawTxHex);"),[4,$t.resolveTransaction(e,this.loadConfig,{externalPlugins:!0,erc20:!0}).catch((function(t){return console.warn("an error occurred in resolveTransaction => fallback to blind signing: "+String(t)),null}))]);case 1:r=K.sent(),K.label=2;case 2:if(!r)return[3,31];K.label=3;case 3:K.trys.push([3,8,9,10]),n=de(r.plugin),a=n.next(),K.label=4;case 4:return a.done?[3,7]:(o=a.value,[4,we(this.transport,o)]);case 5:K.sent(),K.label=6;case 6:return a=n.next(),[3,4];case 7:return[3,10];case 8:return s=K.sent(),L={error:s},[3,10];case 9:try{a&&!a.done&&(V=n.return)&&V.call(n)}finally{if(L)throw L.error}return[7];case 10:K.trys.push([10,15,16,17]),u=de(r.externalPlugin),c=u.next(),K.label=11;case 11:return c.done?[3,14]:(h=c.value,f=h.payload,p=h.signature,[4,ve(this.transport,f,p)]);case 12:K.sent(),K.label=13;case 13:return c=u.next(),[3,11];case 14:return[3,17];case 15:return d=K.sent(),D={error:d},[3,17];case 16:try{c&&!c.done&&(G=u.return)&&G.call(u)}finally{if(D)throw D.error}return[7];case 17:K.trys.push([17,22,23,24]),g=de(r.nfts),m=g.next(),K.label=18;case 18:return m.done?[3,21]:(y=m.value,[4,be(this.transport,he.from(y,"hex"))]);case 19:K.sent(),K.label=20;case 20:return m=g.next(),[3,18];case 21:return[3,24];case 22:return b=K.sent(),$={error:b},[3,24];case 23:try{m&&!m.done&&(Y=g.return)&&Y.call(g)}finally{if($)throw $.error}return[7];case 24:K.trys.push([24,29,30,31]),v=de(r.erc20Tokens),w=v.next(),K.label=25;case 25:return w.done?[3,28]:(E=w.value,[4,ye(this.transport,he.from(E,"hex"))]);case 26:K.sent(),K.label=27;case 27:return w=v.next(),[3,25];case 28:return[3,31];case 29:return x=K.sent(),J={error:x},[3,31];case 30:try{w&&!w.done&&(W=v.return)&&W.call(v)}finally{if(J)throw J.error}return[7];case 31:S=he.from(e,"hex"),_=l(S),A=_.vrsOffset,I=_.txType,P=_.chainId,O=_.chainIdTruncated,T=i(t),N=0,C=function(){var t,e,r,n;return pe(this,(function(a){switch(a.label){case 0:return e=(t=0===N)?149-4*T.length:150,r=N+e>S.length?S.length-N:e,0!=A&&N+r>=A&&(r=S.length-N),n=he.alloc(t?1+4*T.length+r:r),t?(n[0]=T.length,T.forEach((function(t,e){n.writeUInt32BE(t,1+4*e)})),S.copy(n,1+4*T.length,N,N+r)):S.copy(n,0,N,N+r),[4,B.transport.send(224,4,t?0:128,0,n).catch((function(t){throw function(t){return t&&27264===t.statusCode?new Jt("Please enable Blind signing or Contract data in the Ethereum app Settings"):t}(t)}))];case 1:return k=a.sent(),N+=r,[2]}}))},B=this,K.label=32;case 32:return N===S.length?[3,34]:[5,C()];case 33:return K.sent(),[3,32];case 34:return j=k[0],z="",P.times(2).plus(35).plus(1).isGreaterThan(255)?(U=(2*O+35)%256,M=Math.abs(j-U),z=null!=I?M%2==1?"00":"01":P.times(2).plus(35).plus(M).toString(16)):z=j.toString(16),z.length%2==1&&(z="0"+z),R=k.slice(1,33).toString("hex"),F=k.slice(33,65).toString("hex"),[2,{v:z,r:R,s:F}]}}))}))},t.prototype.getAppConfiguration=function(){return this.transport.send(224,6,0,0).then((function(t){return{arbitraryDataEnabled:1&t[0],erc20ProvisioningNecessary:2&t[0],starkEnabled:4&t[0],starkv2Supported:8&t[0],version:t[1]+"."+t[2]+"."+t[3]}}))},t.prototype.signPersonalMessage=function(t,e){return fe(this,void 0,void 0,(function(){var r,n,a,o,s,u,l,c,h;return pe(this,(function(f){switch(f.label){case 0:r=i(t),n=0,a=he.from(e,"hex"),s=function(){var t,e,i;return pe(this,(function(s){switch(s.label){case 0:return t=0===n?149-4*r.length-4:150,e=n+t>a.length?a.length-n:t,i=he.alloc(0===n?1+4*r.length+4+e:e),0===n?(i[0]=r.length,r.forEach((function(t,e){i.writeUInt32BE(t,1+4*e)})),i.writeUInt32BE(a.length,1+4*r.length),a.copy(i,1+4*r.length+4,n,n+e)):a.copy(i,0,n,n+e),[4,u.transport.send(224,8,0===n?0:128,0,i)];case 1:return o=s.sent(),n+=e,[2]}}))},u=this,f.label=1;case 1:return n===a.length?[3,3]:[5,s()];case 2:return f.sent(),[3,1];case 3:return l=o[0],c=o.slice(1,33).toString("hex"),h=o.slice(33,65).toString("hex"),[2,{v:l,r:c,s:h}]}}))}))},t.prototype.signEIP712HashedMessage=function(t,e,r){return function(t,e,r,n){var a=s(r),o=s(n),u=i(e),l=re.alloc(1+4*u.length+32+32,0),c=0;return l[0]=u.length,u.forEach((function(t,e){l.writeUInt32BE(t,1+4*e)})),c=1+4*u.length,a.copy(l,c),c+=32,o.copy(l,c),t.send(224,12,0,0,l).then((function(t){return{v:t[0],r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))}(this.transport,t,e,r)},t.prototype.signEIP712Message=function(t,e,r){return void 0===r&&(r=!1),fe(this,void 0,void 0,(function(){return pe(this,(function(n){return[2,ce(this.transport,t,e,r)]}))}))},t.prototype.starkGetPublicKey=function(t,e){var r=i(t),n=he.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(t,e){n.writeUInt32BE(t,1+4*e)})),this.transport.send(240,2,e?1:0,0,n).then((function(t){return t.slice(0,t.length-2)}))},t.prototype.starkSignOrder=function(t,e,r,n,a,o,s,l,c,h,f){var p=u(e),d=u(n),g=i(t),m=he.alloc(1+4*g.length+20+32+20+32+4+4+8+8+4+4,0),y=0;return m[0]=g.length,g.forEach((function(t,e){m.writeUInt32BE(t,1+4*e)})),y=1+4*g.length,p&&p.copy(m,y),y+=20,he.from(r.toString(16).padStart(64,"0"),"hex").copy(m,y),y+=32,d&&d.copy(m,y),y+=20,he.from(a.toString(16).padStart(64,"0"),"hex").copy(m,y),y+=32,m.writeUInt32BE(o,y),y+=4,m.writeUInt32BE(s,y),y+=4,he.from(l.toString(16).padStart(16,"0"),"hex").copy(m,y),y+=8,he.from(c.toString(16).padStart(16,"0"),"hex").copy(m,y),y+=8,m.writeUInt32BE(h,y),y+=4,m.writeUInt32BE(f,y),this.transport.send(240,4,1,0,m).then((function(t){return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))},t.prototype.starkSignOrder_v2=function(t,e,r,n,a,o,s,l,c,h,f,p,d,g,m){var y=u(e),b=u(o);if(!(r in ge))throw new Error("eth.starkSignOrderv2 invalid source quantization type="+r);if(!(s in ge))throw new Error("eth.starkSignOrderv2 invalid destination quantization type="+s);var v=i(t),w=he.alloc(1+4*v.length+1+20+32+32+1+20+32+32+4+4+8+8+4+4,0),E=0;return w[0]=v.length,v.forEach((function(t,e){w.writeUInt32BE(t,1+4*e)})),E=1+4*v.length,w[E]=ge[r],E++,y&&y.copy(w,E),E+=20,n&&he.from(n.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,a&&he.from(a.toString(16).padStart(64,"0"),"hex").copy(w,E),w[E+=32]=ge[s],E++,b&&b.copy(w,E),E+=20,l&&he.from(l.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,c&&he.from(c.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,w.writeUInt32BE(h,E),E+=4,w.writeUInt32BE(f,E),E+=4,he.from(p.toString(16).padStart(16,"0"),"hex").copy(w,E),E+=8,he.from(d.toString(16).padStart(16,"0"),"hex").copy(w,E),E+=8,w.writeUInt32BE(g,E),E+=4,w.writeUInt32BE(m,E),this.transport.send(240,4,3,0,w).then((function(t){return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))},t.prototype.starkSignTransfer=function(t,e,r,n,a,o,l,c,h){var f=u(e),p=s(n),d=i(t),g=he.alloc(1+4*d.length+20+32+32+4+4+8+4+4,0),m=0;return g[0]=d.length,d.forEach((function(t,e){g.writeUInt32BE(t,1+4*e)})),m=1+4*d.length,f&&f.copy(g,m),m+=20,he.from(r.toString(16).padStart(64,"0"),"hex").copy(g,m),m+=32,p.copy(g,m),m+=32,g.writeUInt32BE(a,m),m+=4,g.writeUInt32BE(o,m),m+=4,he.from(l.toString(16).padStart(16,"0"),"hex").copy(g,m),m+=8,g.writeUInt32BE(c,m),m+=4,g.writeUInt32BE(h,m),this.transport.send(240,4,2,0,g).then((function(t){return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))},t.prototype.starkSignTransfer_v2=function(t,e,r,n,a,o,l,c,h,f,p,d,g){var m=u(e),y=s(o),b=u(d);if(!(r in ge))throw new Error("eth.starkSignTransferv2 invalid quantization type="+r);var v=i(t),w=he.alloc(1+4*v.length+1+20+32+32+32+4+4+8+4+4+(b?52:0),0),E=0;return w[0]=v.length,v.forEach((function(t,e){w.writeUInt32BE(t,1+4*e)})),E=1+4*v.length,w[E]=ge[r],E++,m&&m.copy(w,E),E+=20,n&&he.from(n.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,a&&he.from(a.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,y.copy(w,E),E+=32,w.writeUInt32BE(l,E),E+=4,w.writeUInt32BE(c,E),E+=4,he.from(h.toString(16).padStart(16,"0"),"hex").copy(w,E),E+=8,w.writeUInt32BE(f,E),E+=4,w.writeUInt32BE(p,E),b&&g&&(E+=4,he.from(g.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,b.copy(w,E)),this.transport.send(240,4,b?5:4,0,w).then((function(t){return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))},t.prototype.starkProvideQuantum=function(t,e){var r=u(t),n=he.alloc(52,0);return r&&r.copy(n,0),he.from(e.toString(16).padStart(64,"0"),"hex").copy(n,20),this.transport.send(240,8,0,0,n).then((function(){return!0}),(function(t){if(t&&27904===t.statusCode)return!1;throw t}))},t.prototype.starkProvideQuantum_v2=function(t,e,r,n){var a=u(t);if(!(e in ge))throw new Error("eth.starkProvideQuantumV2 invalid quantization type="+e);var o=he.alloc(84,0),i=0;return a&&a.copy(o,i),i+=20,r&&he.from(r.toString(16).padStart(64,"0"),"hex").copy(o,i),i+=32,n&&he.from(n.toString(16).padStart(64,"0"),"hex").copy(o,i),this.transport.send(240,8,ge[e],0,o).then((function(){return!0}),(function(t){if(t&&27904===t.statusCode)return!1;throw t}))},t.prototype.starkUnsafeSign=function(t,e){var r,n=s(e),a=i(t),o=he.alloc(1+4*a.length+32);return o[0]=a.length,a.forEach((function(t,e){o.writeUInt32BE(t,1+4*e)})),r=1+4*a.length,n.copy(o,r),this.transport.send(240,10,0,0,o).then((function(t){return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}}))},t.prototype.eth2GetPublicKey=function(t,e){var r=i(t),n=he.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(t,e){n.writeUInt32BE(t,1+4*e)})),this.transport.send(224,14,e?1:0,0,n).then((function(t){return{publicKey:t.slice(0,-2).toString("hex")}}))},t.prototype.eth2SetWithdrawalIndex=function(t){var e=he.alloc(4,0);return e.writeUInt32BE(t,0),this.transport.send(224,16,0,0,e).then((function(){return!0}),(function(t){if(t&&27904===t.statusCode)return!1;throw t}))},t.prototype.getEIP1024PublicEncryptionKey=function(t,e){var r=i(t),n=he.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(t,e){n.writeUInt32BE(t,1+4*e)})),this.transport.send(224,24,e?1:0,0,n).then((function(t){return{publicKey:t.slice(0,-2).toString("hex")}}))},t.prototype.getEIP1024SharedSecret=function(t,e,r){var n,a=i(t),o=s(e),u=he.alloc(1+4*a.length+32);return u[0]=a.length,a.forEach((function(t,e){u.writeUInt32BE(t,1+4*e)})),n=1+4*a.length,o.copy(u,n),this.transport.send(224,24,r?1:0,1,u).then((function(t){return{sharedSecret:t.slice(0,-2).toString("hex")}}))},t.prototype.provideERC20TokenInformation=function(t){var e=t.data;return ye(this.transport,e)},t.prototype.setExternalPlugin=function(t,e,r){return console.warn("hw-app-eth: eth.setExternalPlugin is deprecated. signTransaction solves this for you when providing it in `resolution`."),ve(this.transport,t,r)},t.prototype.setPlugin=function(t){return console.warn("hw-app-eth: eth.setPlugin is deprecated. signTransaction solves this for you when providing it in `resolution`."),we(this.transport,t)},t}();function ye(t,e){return t.send(224,10,0,0,e).then((function(){return!0}),(function(t){if(t&&27904===t.statusCode)return!1;throw t}))}function be(t,e){return t.send(224,20,0,0,e).then((function(){return!0}),(function(t){if(t&&27904===t.statusCode)throw new Wt;throw t}))}function ve(t,e,r){var n=he.from(e,"hex"),a=he.from(r,"hex"),o=he.concat([n,a]);return t.send(224,18,0,0,o).then((function(){return!0}),(function(t){if(t&&27264===t.statusCode)return!1;if(t&&27012===t.statusCode)return!1;if(t&&27904===t.statusCode)return!1;throw t}))}function we(t,e){var r=he.from(e,"hex");return t.send(224,22,0,0,r).then((function(){return!0}),(function(t){if(t&&27264===t.statusCode)return!1;if(t&&27012===t.statusCode)return!1;if(t&&27904===t.statusCode)return!1;throw t}))}}}]);