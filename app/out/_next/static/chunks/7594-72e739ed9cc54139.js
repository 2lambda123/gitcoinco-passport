(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7594],{51834:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var s=n(24246),r=(n(27378),function(e){var t=e.lightMode;return(0,s.jsxs)("div",{className:"py-2 px-4",children:[(0,s.jsxs)("div",{className:"container mx-auto flex flex-wrap items-center py-5 px-2 md:flex-row",children:[(0,s.jsxs)("div",{className:"flex flex-col p-2 text-base text-gray-400 lg:flex-row",children:["Powered By",(0,s.jsx)("a",{href:"https://ceramic.network/",target:"_blank",rel:"noopener noreferrer",className:"underline lg:ml-2",children:"Ceramic Network."})]}),(0,s.jsx)("img",{src:"./assets/gitcoindaoLogoLight.svg",alt:"Gitcoin Logo",className:"flex hidden flex-wrap items-center justify-center p-2 text-base md:ml-auto md:mr-auto md:inline-block"}),(0,s.jsx)("a",{href:"https://github.com/gitcoinco/passport",target:"_blank",rel:"noopener noreferrer",className:"ml-auto mt-4 mr-auto inline-flex rounded py-1 text-base md:ml-12 md:mt-0 md:mr-4",children:(0,s.jsx)("img",{src:t?"./assets/githubLogoLight.svg":"./assets/githubLogoDark.svg",alt:"Github Logo"})}),(0,s.jsx)("a",{href:"https://docs.passport.gitcoin.co/gitcoin-passport-sdk/getting-started",target:"_blank",rel:"noopener noreferrer",className:"ml-2 mt-4 inline-flex items-center border-gray-400 py-2 px-6 text-base md:mt-0",children:(0,s.jsx)("img",{src:t?"./assets/docsIconLight.svg":"./assets/docsIconDark.svg",alt:"Docs Icon"})})]}),(0,s.jsx)("div",{className:"mx-auto h-px w-full flex-grow bg-gray-400 md:invisible"}),(0,s.jsx)("img",{src:"./assets/gitcoindaoLogoLight.svg",alt:"Gitcoin Logo",className:"mx-auto p-4 md:invisible"})]})})},5268:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ue}});var s=n(52050),r=n(24246),o=n(27378),i=n(14935),a=n(65783),l=function(e){var t=void 0;return c.forEach((function(n){n.platform===e&&(t=n)})),t},c=[{icon:"./assets/gtcPossessionStampIcon.svg",platform:"GTC",name:"GTC",description:"Connect your wallet to confirm GTC possession",connectMessage:"Verify Ownership",isEVM:!0},{icon:"./assets/gtcStakingLogoIcon.svg",platform:"GtcStaking",name:"GTC Staking",description:"Connect your wallet to verify your staked amount. This accesses your Passport data.",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/gitcoinStampIcon.svg",platform:"Gitcoin",name:"Gitcoin Grants",description:"Connect Github account to review your donation activity on Gitcoin (Up to GR15).",connectMessage:"Connect Account"},{icon:"./assets/twitterStampIcon.svg",platform:"Twitter",name:"Twitter",description:"Connect your Twitter account to verify stamp details.",connectMessage:"Connect Account"},{icon:"./assets/discordStampIcon.svg",platform:"Discord",name:"Discord",description:"Connect your Discord account to verify stamp details.",connectMessage:"Connect Account"},{icon:"./assets/googleStampIcon.svg",platform:"Google",name:"Google",description:"Connect your Google Account to verify stamp details.",connectMessage:"Connect Account"},{icon:"./assets/githubStampIcon.svg",platform:"Github",name:"Github",description:"Connect your Github account to verify stamp details.",connectMessage:"Connect Account"},{icon:"./assets/facebookStampIcon.svg",platform:"Facebook",name:"Facebook",description:"Connect your Facebook account to verify stamp details.",connectMessage:"Connect Account"},{icon:"./assets/linkedinStampIcon.svg",platform:"Linkedin",name:"Linkedin",description:"Connect your LinkedIn account to verify stamp details.",connectMessage:"Connect Account"},{icon:"./assets/ensStampIcon.svg",platform:"Ens",name:"ENS",description:"Verify your ENS account. If you do not have one, you can purchase one.",connectMessage:"Verify Ownership",isEVM:!0},{icon:"./assets/poapStampIcon.svg",platform:"POAP",name:"POAP",description:"Verify POAP ownership (POAP must be atleast 15 days old).",connectMessage:"Verify Ownership",isEVM:!0},{icon:"./assets/brightidStampIcon.svg",platform:"Brightid",name:"BrightID",description:"Verify your BrightID connection details. If you do not have BrightID, you can join a connection party.",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/pohStampIcon.svg",platform:"Poh",name:"Proof of Humanity",description:"Verify you have a Proof of Humanity profile.",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/ethereumStampIcon.svg",platform:"ETH",name:"ETH",description:"Connect your account to verify ETH possession and transaction volume.",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/snapshotStampIcon.svg",platform:"Snapshot",name:"Snapshot",description:"Connect your account to verify Snapshot stamp details.",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/gitPOAPStampIcon.svg",platform:"GitPOAP",name:"GitPOAP",description:"Connect your account to verify GitPOAP Verification.",connectMessage:"Connect Account"},{icon:"./assets/nftStampIcon.svg",platform:"NFT",name:"NFT Holder",description:"Connect your wallet and confirm you own an NFT.",connectMessage:"Confirm Ownership"},{icon:"./assets/zksyncStampIcon.svg",platform:"ZkSync",name:"ZkSync",description:"Connect your wallet to verify ZkSync transactions.",connectMessage:"Connect Wallet",isEVM:!0},{icon:"./assets/lensStampIcon.svg",platform:"Lens",name:"Lens",description:"Connect your wallet to verify ownership of a Lens Profile.",connectMessage:"Connect Walllet",isEVM:!0},{icon:"./assets/gnosisSafeStampIcon.svg",platform:"GnosisSafe",name:"Gnosis Safe",description:"Connect your wallet to verify Gnosis Safe Signer/Owner Verification",connectMessage:"Connect Wallet"}],d=n(56004),u=function(){return(0,r.jsx)("div",{className:"w-1/2 p-2 md:w-1/2 xl:w-1/4","data-testid":"loading-card",children:(0,r.jsxs)("div",{className:"relative flex animate-pulse flex-col border border-gray-200 p-0 xl:p-2",children:[(0,r.jsx)("div",{className:"flex flex-row p-6",children:(0,r.jsx)("div",{className:"flex h-10 w-10 flex-grow justify-center md:justify-start",children:(0,r.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-300"})})}),(0,r.jsx)("div",{className:"mt-2 flex p-2 px-4",children:(0,r.jsx)("div",{className:"mx-auto mb-4 h-4 w-1/3 rounded-lg bg-gray-300 md:mx-0 md:mb-0 xl:mb-2"})}),(0,r.jsxs)("div",{className:"mb-4 hidden grid-cols-12 gap-4 p-2 px-4 md:grid xl:mb-6",children:[(0,r.jsx)("div",{className:"col-span-3 h-3 rounded-md bg-gray-300"}),(0,r.jsx)("div",{className:"col-span-2 h-3 rounded-md bg-gray-300"})]}),(0,r.jsxs)("div",{className:"mt-auto flex h-12 w-full flex-row items-center justify-center border-t text-gray-900",children:[(0,r.jsx)("div",{className:"mr-2 h-3 w-1/5 rounded-md bg-gray-300"}),(0,r.jsx)("div",{className:"ml-2 h-3 w-1/5 rounded-md bg-gray-300"})]})]})})},m=n(23842),f=n(3204),p=n(59312),h=n(82649),x=n(44592),g=n(18453),v=n(83125),y=n(86959);function j(e){var t=e.currentProviders,n=e.verifiedProviders,s=e.selectedProviders,o=e.setSelectedProviders;return(0,r.jsx)(r.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e,t){var i,a;return(0,r.jsxs)("div",{className:"border-b py-4 px-6",children:[(0,r.jsx)("p",{className:"ml-4 text-sm font-bold",children:e.platformGroup}),(0,r.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,r.jsx)("ul",{className:"marker:leading-1 list-disc marker:text-3xl ",children:null===(i=e.providers)||void 0===i?void 0:i.map((function(e,t){return(0,r.jsx)("li",{className:"ml-4 ".concat(-1!==(null===n||void 0===n?void 0:n.indexOf(e.name))?"text-green-500":"text-gray-400"),"data-testid":"indicator-".concat(e.name),children:(0,r.jsx)("div",{className:"relative top-[-0.3em] text-sm text-gray-400",children:e.title})},"".concat(e.title).concat(t))}))}),(0,r.jsx)("div",{className:"align-right flex",children:(0,r.jsx)(y.r,{colorScheme:"green",size:"lg","data-testid":"switch-".concat(t),isChecked:(null===(a=e.providers)||void 0===a?void 0:a.reduce((function(e,t){return e||-1!==(null===s||void 0===s?void 0:s.indexOf(t.name))}),!1))||!1,onChange:function(t){var n,r=null===(n=e.providers)||void 0===n?void 0:n.map((function(e){return e.name}));o&&o(t.target.checked?(s||[]).concat(r):(s||[]).filter((function(e){return!r.includes(e)})))}})})]})]},t)}))})}function b(e){var t=e.currentPlatform;return(0,r.jsxs)("div",{className:"w-full text-center sm:py-8",children:[(0,r.jsx)("div",{className:"inline-flex h-20 w-20 items-center justify-center rounded-full text-gray-400",children:(0,r.jsx)("img",{alt:"Platform Image",className:"h-full w-full",src:null===t||void 0===t?void 0:t.icon})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,r.jsx)("h2",{className:"font-miriam-libre title-font mt-4 text-2xl font-medium text-gray-900",children:null===t||void 0===t?void 0:t.name}),(0,r.jsx)("p",{className:"font-miriam-libre text-base text-gray-500",children:null===t||void 0===t?void 0:t.description})]})]})}var w=function(e){var t=e.currentPlatform,n=e.currentProviders,s=e.verifiedProviders,i=e.selectedProviders,a=e.setSelectedProviders,l=e.isLoading,c=e.verifyButton,d=e.infoElement,u=(0,o.useState)([]),m=u[0],f=u[1],p=(0,o.useState)(!1),h=p[0],x=p[1];return(0,o.useEffect)((function(){var e=(null===n||void 0===n?void 0:n.reduce((function(e,t,n){var s;return e.concat(null===(s=t.providers)||void 0===s?void 0:s.map((function(e){return e.name})))}),[]))||[],t=((null===i||void 0===i?void 0:i.length)||0)<e.length;x(!t),f(e)}),[n,i]),(0,r.jsxs)(g.sc,{children:[(0,r.jsx)(g.cC,{disabled:l,className:"z-10"}),t&&n?(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsx)(g.OX,{children:(0,r.jsx)(b,{currentPlatform:t})}),(0,r.jsx)(g.Ng,{style:{paddingInlineStart:"0",paddingInlineEnd:"0",WebkitPaddingStart:"0",WebkitPaddingEnd:"0"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex pl-4 pr-6",children:(0,r.jsx)("span",{"data-testid":"select-all",className:"ml-auto py-2 text-sm ".concat(h?"cursor-default ":"cursor-pointer text-purple-connectPurple"," "),onClick:function(e){h||a&&a(h?[]:m)},children:h?"Selected!":"Select all"})}),(0,r.jsx)("hr",{className:"border-1"}),(0,r.jsx)(j,{currentProviders:n,verifiedProviders:s,selectedProviders:i,setSelectedProviders:function(e){return a&&a(e)}}),d,(0,r.jsx)("div",{className:"pl-4 pr-4 pb-4",children:l?(0,r.jsxs)("button",{disabled:!0,"data-testid":"button-loading-twitter",className:"sidebar-verify-btn mx-auto flex justify-center",children:[(0,r.jsx)(v.$,{size:"sm",className:"my-auto mr-2"}),s.length>0?(0,r.jsx)("p",{children:"Saving"}):(0,r.jsx)("p",{children:"Verifying"})]}):c})]})})]}):(0,r.jsx)("div",{children:(0,r.jsx)(g.OX,{children:(0,r.jsx)("div",{className:"mt-10 flex flex-col sm:flex-row",children:(0,r.jsx)("div",{className:"w-full text-center sm:py-8 sm:pr-8",children:"The requested Platform or Provider was not found"})})})})]})},N=function(e){var t=e.platformId,n=e.providerId,s=e.title,o=e.body,i=e.icon,a=e.result,l=e.message,c=void 0!==l&&l;return(0,r.jsx)("div",{className:"rounded-md bg-blue-darkblue text-white","data-testid":"toast-done-".concat(t&&t.toLowerCase()||n&&n.toLowerCase()),children:(0,r.jsxs)("div",{className:"flex p-4",children:[(0,r.jsx)("div",{className:"mr-2",children:(0,r.jsx)("button",{className:"mt-1 cursor-not-allowed rounded-full bg-gray-100",children:(0,r.jsx)("img",{alt:"information circle",className:"sticky top-0 h-6",src:i})})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("h2",{className:"title-font mb-2 text-lg font-bold",children:s}),(0,r.jsx)("p",{children:c||o})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"sticky top-0",onClick:a.onClose,children:(0,r.jsx)("img",{alt:"close button",className:"rounded-lg hover:bg-gray-500",src:"./assets/x-icon.svg"})})})]})})},C=n(73498);function S(e){var t=e.banner;return(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("div",{className:"mt-10 rounded-lg border border-purple-infoElementBorder bg-purple-infoElementBG px-4 py-6",children:(0,r.jsxs)("div",{className:"font-libre-franklin",children:[(0,r.jsx)("h2",{className:"text-md mb-0 text-left font-bold text-gray-900",children:t.heading}),(0,r.jsx)("h2",{className:"text-md mb-2 text-left text-gray-900",children:t.content}),(0,r.jsx)("hr",{}),t.cta&&(0,r.jsx)("a",{href:t.cta.url,className:"mx-auto mt-2 flex justify-center text-purple-gitcoinpurple",target:"_blank",rel:"noopener noreferrer",children:t.cta.label})]})})})}var P=n(39336),k=n(7092),I=n(33290);function V(e,t){var n=new Set(e);return t.forEach((function(e){n.delete(e)})),n}var E=n(17319),A=n(3731),M=n(29184),O=n(9722),L=n(70169),G=n(20249),R="https://passport-signer.gitcoin.co/";function T(e){var t=document.createElement("iframe");return t.setAttribute("src",e),t.setAttribute("style","height:0px;width:0px;outline:none;border:0;opacity:0;"),document.body.appendChild(t),t}!function(){var e=(0,m.Z)((function(e){var t;return(0,p.__generator)(this,(function(n){switch(n.label){case 0:return t=T(R),[4,new Promise((function(n,s){var r=setTimeout((function(){s("Failed to get a ready response from the signer page in time...")}),5e3),o=function(){document.body.removeChild(t),window.removeEventListener("message",i)},i=function(i){var a,l,c;"ready"==i.data?(clearTimeout(r),null===(c=t.contentWindow)||void 0===c||c.postMessage({cmd:"sign_message",msg:e,host:"".concat(window.location.protocol,"//").concat(window.location.host)},R)):"signed_message"==(null===(a=i.data)||void 0===a?void 0:a.cmd)?(o(),n((0,O.Z)({},i.data))):"sign_message_error"==(null===(l=i.data)||void 0===l?void 0:l.cmd)&&(o(),s("Failed to get signature"))};window.addEventListener("message",i)}))];case 1:return[2,n.sent().sig]}}))}))}();var F,_=function(){var e=(0,m.Z)((function(e){var t,n;return(0,p.__generator)(this,(function(s){switch(s.label){case 0:return h.fy.logger.info("Starting verification",{provider:"Signer"}),[4,(0,x.fetchChallengeCredential)("https://passport-iam.gitcoin.co/api/",{type:"SignerChallenge",version:"0.0.0",address:e||""})];case 1:return t=s.sent().challenge,n=T(R),[4,new Promise((function(e,s){var r=setTimeout((function(){s("Failed to get a ready response from the signer page in time...")}),5e3),o=function(){document.body.removeChild(n),window.removeEventListener("message",i)},i=function(i){var a,l,c;"ready"==i.data?(clearTimeout(r),null===(c=n.contentWindow)||void 0===c||c.postMessage({cmd:"sign_message",msg:t.credentialSubject.challenge,host:"".concat(window.location.protocol,"//").concat(window.location.host)},R)):"signed_message"==(null===(a=i.data)||void 0===a?void 0:a.cmd)?(o(),e((0,L.Z)((0,O.Z)({},i.data),{challenge:t}))):"sign_message_error"==(null===(l=i.data)||void 0===l?void 0:l.cmd)&&(o(),s("Failed to get signature"))};window.addEventListener("message",i)}))];case 2:return[2,s.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,m.Z)((function(e,t){var n,s,r,o;return(0,p.__generator)(this,(function(i){switch(i.label){case 0:return"https://eth-mainnet.alchemyapi.io/v2/XNldLwed7BuXqNQWQCc5xFffgFz7YgCU",n=[],s=[],t.forEach((function(e,t,r){var o,i=r.get(t);(null===i||void 0===i?void 0:i.platform.isEVM)&&((o=s).push.apply(o,(0,f.Z)(i.platFormGroupSpec)),n.push(i))})),r=n.map((function(t){var n=t.platFormGroupSpec.map((function(t){return t.providers.map(function(){var t=(0,m.Z)((function(t){return(0,p.__generator)(this,(function(n){switch(n.label){case 0:return[4,G.providers.verify(t.name,{type:t.name,address:e,version:"0.0.0",rpcUrl:"https://eth-mainnet.alchemyapi.io/v2/XNldLwed7BuXqNQWQCc5xFffgFz7YgCU"},{})];case 1:return[2,{payload:n.sent(),providerType:t.name}]}}))}));return function(e){return t.apply(this,arguments)}}())}));return{validatedProviderGroup:n,platform:t}})),[4,Promise.all(r.map(function(){var e=(0,m.Z)((function(e){return(0,p.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.validatedProviderGroup.map(function(){var e=(0,m.Z)((function(e){return(0,p.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e)];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return[2,{validatedPlatformGroups:t.sent(),platformProps:e.platform}]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return o=i.sent(),[2,o.filter((function(e){return e.validatedPlatformGroups.filter((function(e){return e.filter((function(e){return e.payload.valid})).length>0})).length>0}))]}}))}));return function(t,n){return e.apply(this,arguments)}}(),Z=n(29549),D=function(e){var t,n=e.additionalSigner,s=e.onClose,i=(0,o.useContext)(P.oQ),a=i.allPlatforms,c=i.handleAddStamps,d=i.handleDeleteStamps,u=(0,o.useContext)(k.St),g=u.signer,y=u.address,w=(0,o.useState)(!1),N=w[0],C=w[1],S=(0,o.useState)([]),I=S[0],V=S[1],E=(0,o.useState)(null),A=E[0],M=E[1],O=(0,o.useState)(!1),L=O[0],G=O[1],R=(0,o.useState)([]),T=R[0],F=R[1],_=function(){var e=(0,m.Z)((function(){var e,t,s,r,o,i,a;return(0,p.__generator)(this,(function(l){switch(l.label){case 0:if(!A)return[3,9];e=(null===A||void 0===A?void 0:A.platformProps).platform,h.fy.logger.info("Saving Stamp",{platform:e.platformId}),G(!0),l.label=1;case 1:return l.trys.push([1,7,8,9]),t=[],W.length>0?[4,(0,x.fetchVerifiableCredential)("https://passport-iam.gitcoin.co/api/",{type:e.platformId,types:W,version:"0.0.0",address:y||"",proofs:{},rpcUrl:"https://eth-mainnet.alchemyapi.io/v2/XNldLwed7BuXqNQWQCc5xFffgFz7YgCU",signer:{challenge:n.challenge,signature:n.sig,address:n.addr}},g)]:[3,3];case 2:if((s=l.sent()).credentials)for(r=function(e){var n,r=s.credentials[e];!r.error&&Y.find((function(e){var t;return(null===r||void 0===r||null===(t=r.record)||void 0===t?void 0:t.type)===e}))&&t.push({provider:null===(n=r.record)||void 0===n?void 0:n.type,credential:r.credential})},o=0;o<s.credentials.length;o++)r(o);l.label=3;case 3:return[4,d(Y)];case 4:return l.sent(),t.length>0?[4,c(t)]:[3,6];case 5:l.sent(),l.label=6;case 6:return h.fy.logger.info("Successfully saved Stamp",{platform:e.platformId}),i=Y.filter((function(e){return!!t.find((function(t){var n,s;return(null===t||void 0===t||null===(n=t.credential)||void 0===n||null===(s=n.credentialSubject)||void 0===s?void 0:s.provider)===e}))})),H((0,f.Z)(i)),Q((0,f.Z)(i)),i.length>0&&F((0,f.Z)(T).concat([e.platformId])),G(!1),[3,9];case 7:throw a=l.sent(),h.fy.logger.error("Verification Error",{error:a,platform:e.platformId}),a;case 8:return G(!1),[7];case 9:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),D=(0,o.useState)([]),B=D[0],H=D[1],U=(0,o.useState)((0,f.Z)(B)),W=U[0],Q=U[1],Y=(null===(t=null===A||void 0===A?void 0:A.platformProps.platFormGroupSpec)||void 0===t?void 0:t.reduce((function(e,t,n){var s;return e.concat(null===(s=t.providers)||void 0===s?void 0:s.map((function(e){return e.name})))}),[]))||[];if((0,o.useEffect)((function(){var e=function(){var e=(0,m.Z)((function(){var e;return(0,p.__generator)(this,(function(t){switch(t.label){case 0:return C(!0),[4,z(n.addr,a)];case 1:return e=t.sent(),V(e),C(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[a,n]),A){var q=Y.length===W.length,X=l(A.platformProps.platform.path);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex w-full justify-start",children:(0,r.jsx)("button",{onClick:function(){return M(null)},children:(0,r.jsx)("img",{width:"20px",src:"./assets/arrow-left-icon.svg",alt:"Check Icon"})})}),(0,r.jsx)(b,{currentPlatform:X}),(0,r.jsxs)("div",{className:"mb-2 w-full",children:[(0,r.jsxs)("div",{className:"flex w-full justify-between",children:[(0,r.jsx)("p",{className:"mb-1 text-left text-sm font-semibold text-gray-600",children:"Accounts"}),(0,r.jsx)("a",{className:"cursor-pointer text-sm ".concat(q?"text-gray-600":"text-purple-connectPurple"),"data-testid":"add-all-btn",onClick:function(){Q(Y)},children:q?"Added!":"Add All"})]}),(0,r.jsx)("hr",{className:"border-1"})]}),(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)(j,{currentProviders:A.platformProps.platFormGroupSpec,verifiedProviders:B,selectedProviders:W,setSelectedProviders:function(e){return Q&&Q(e)}})}),(0,r.jsx)("button",{"data-testid":"verify-btn",className:"sidebar-verify-btn mx-auto flex justify-center",onClick:_,children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.$,{size:"sm",className:"my-auto mr-2"}),(0,r.jsx)("p",{children:"Verifying"})]}):(0,r.jsx)("p",{children:"Verify"})})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center text-center text-gray-900",children:[(0,r.jsx)("h2",{className:"mt-2 font-semibold",children:"Stamp Verification"}),(0,r.jsx)("p",{className:"my-2 text-gray-600",children:"We found the following stamps, select which ones you would like to link."}),(0,r.jsxs)("div",{className:"my-4 flex w-full flex-col rounded bg-yellow p-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold",children:"Second Account"}),(0,r.jsx)("p",{className:"text-sm",children:n.addr})]}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)("p",{className:"w-full text-left text-sm font-semibold text-gray-600",children:"Accounts"}),(0,r.jsx)("hr",{className:"border-1"}),N?(0,r.jsx)("div",{className:"mt-6 flex w-full justify-center",children:(0,r.jsx)(v.$,{size:"lg"})}):I.map((function(e){var t=l(e.platformProps.platform.path);if(t)return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex w-full justify-between",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("img",{width:"25px",alt:"Platform Image",src:null===t||void 0===t?void 0:t.icon,className:"m-3"}),(0,r.jsx)("p",{className:"pt-2 text-sm font-semibold",children:t.name})]}),T.includes(t.name)?(0,r.jsxs)("button",{onClick:function(){return M(e)},className:"mt-2 flex h-8 w-24 items-center justify-center rounded-md bg-green-200 py-6 text-sm font-semibold ",children:[(0,r.jsx)("img",{width:"20px",alt:"Check Icon",src:"./assets/check-icon.svg"}),"Verified"]}):(0,r.jsxs)(Z.zx,{"data-testid":"".concat(e.platformProps.platform.path,"-add-btn"),mt:2,onClick:function(){return M(e)},children:[(0,r.jsx)("img",{width:"20px",alt:"Plus Icon",src:"./assets/plus-icon.svg"}),"Add"]})]}),(0,r.jsx)("hr",{className:"border-1"})]},t.name)})),!N&&0===I.length&&(0,r.jsx)("p",{className:"mt-4 font-semibold text-gray-600",children:"Additional stamps were not Found"})]})]}),(0,r.jsx)("button",{className:"sidebar-verify-btn mx-auto flex justify-center",onClick:function(){V([]),M(null),F([]),s()},children:"Done"})]})},B=function(e){var t=e.isOpen,n=e.onClose,s=(0,o.useContext)(k.St).address,i=(0,o.useState)(!1),a=i[0],l=i[1],c=(0,o.useState)(),d=c[0],u=c[1],f=function(){u(void 0),l(!1),n()};return(0,r.jsxs)(g.u_,{isOpen:t,onClose:function(){f()},blockScrollOnMount:!1,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsx)(g.hz,{children:(0,r.jsxs)("div",{className:"m-3 flex flex-col items-center",children:[(0,r.jsx)("button",{onClick:function(){f()},className:"absolute right-3",children:(0,r.jsx)("img",{width:"20px",src:"./assets/x-mark-icon.svg",alt:"Check Icon"})}),d?(0,r.jsx)(D,{additionalSigner:d,onClose:function(){f()}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mt-2 w-fit rounded-full bg-pink-500/25",children:(0,r.jsx)("img",{className:"m-2",alt:"shield-exclamation-icon",src:"./assets/shield-exclamation-icon-warning.svg"})}),(0,r.jsx)("p",{className:"m-1 text-sm font-bold",children:"No Stamp Found"}),(0,r.jsx)("p",{className:"m-1 mb-4 text-center",children:"The stamp you are trying to verify could not be associated with your current Ethereum wallet address."}),(0,r.jsx)("div",{className:"flex w-full",children:(0,r.jsxs)("button",{"data-testid":"check-other-wallet",className:"m-1 mx-auto flex w-full justify-center rounded-md bg-purple-connectPurple py-2 text-white hover:bg-purple-200 hover:text-black",onClick:(0,m.Z)((function(){var e;return(0,p.__generator)(this,(function(t){switch(t.label){case 0:l(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,_(s)];case 2:return e=t.sent(),u(e),[3,4];case 3:return l(!1),[7];case 4:return[2]}}))})),children:[a&&(0,r.jsx)(v.$,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"purple.500",size:"sm","data-testid":"loading-indicator",className:"my-auto mr-2"}),"Try another wallet"]})})]})]})})]})};!function(e){e[e.AllVerified=0]="AllVerified",e[e.ReVerified=1]="ReVerified",e[e.PartiallyVerified=2]="PartiallyVerified",e[e.AllRemoved=3]="AllRemoved",e[e.PartiallyRemoved=4]="PartiallyRemoved",e[e.PartiallyRemovedAndVerified=5]="PartiallyRemovedAndVerified",e[e.Failed=6]="Failed"}(F||(F={}));var H,U="../../assets/check-icon.svg",W=function(e){var t=e.platFormGroupSpec,n=e.platform,s=(0,o.useContext)(k.St),i=s.address,a=s.signer,l=(0,o.useContext)(P.oQ),c=l.handleAddStamps,d=l.handleDeleteStamps,u=l.allProvidersState,g=l.userDid,v=(0,o.useState)(!1),y=v[0],j=v[1],b=(0,o.useState)(!1),O=b[0],L=b[1],G=(0,o.useState)(!1),R=G[0],T=G[1],_=(0,C.pm)(),z=(0,o.useMemo)((function(){return(null===t||void 0===t?void 0:t.reduce((function(e,t){var n;return e.concat(null===(n=t.providers)||void 0===n?void 0:n.map((function(e){return e.name})))}),[]))||[]}),[t]),Z=(0,o.useState)(z.filter((function(e){var t,n;return"undefined"!==typeof(null===(t=u[e])||void 0===t||null===(n=t.stamp)||void 0===n?void 0:n.credential)}))),D=Z[0],H=Z[1],W=(0,o.useState)((0,f.Z)(D)),Q=W[0],Y=W[1],q=new Set(D);(0,o.useEffect)((function(){Q.length!==D.length&&L(!0)}),[Q,D]);var X=function(e){var t=new A.g0("".concat(n.path,"_oauth_channel"));return new Promise((function(e,s){t.onmessage=(0,E.D)((function(t){if(t.target===n.path){var r=t.data.code,o=t.data.state;h.fy.logger.info("Saving Stamp",{platform:n.platformId});try{e({code:r,state:o})}catch(i){h.fy.logger.error("Error saving Stamp",{platform:n.platformId}),console.error(i),s(i)}}}),300)})).finally((function(){t.close()}))},J=function(){var e=(0,m.Z)((function(e){return(0,p.__generator)(this,(function(t){return"success"===e?(_({duration:9e3,isClosable:!0,render:function(e){return(0,r.jsx)("div",{className:"rounded-md bg-blue-darkblue p-2 text-white",children:(0,r.jsxs)("div",{className:"flex p-4",children:[(0,r.jsx)("button",{className:"inline-flex flex-shrink-0 cursor-not-allowed",children:(0,r.jsx)("img",{alt:"information circle",className:"sticky top-0 mb-20 p-2",src:"./assets/information-circle-icon.svg"})}),(0,r.jsxs)("div",{className:"flex-grow pl-6",children:[(0,r.jsx)("h2",{className:"title-font mb-2 text-lg font-bold",children:"Sponsored through Gitcoin for Bright ID"}),(0,r.jsx)("p",{className:"text-base leading-relaxed",children:"For verification status updates, check BrightID's App."}),(0,r.jsx)("p",{className:"text-base leading-relaxed",children:"Once you are verified by BrightID - return here to complete this Stamp."})]}),(0,r.jsx)("button",{className:"inline-flex flex-shrink-0 rounded-lg",onClick:e.onClose,children:(0,r.jsx)("img",{alt:"close button",className:"rounded-lg p-2 hover:bg-gray-500",src:"./assets/x-icon.svg"})})]})})}}),h.fy.logger.info("Successfully sponsored user on BrightId",{platformId:n.platformId})):(_({title:"Failure",description:"Failed to trigger BrightID Sponsorship",status:"error",duration:9e3,isClosable:!0}),h.fy.logger.error("Error sponsoring user",{platformId:n.platformId}),M.v.addError("Failed to sponsor user on BrightId",{platformId:n.platformId})),[2]}))}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,m.Z)((function(){var e,t,s,r,o,l,u,m,v,y,b,w,N,C,S,P,k;return(0,p.__generator)(this,(function(p){switch(p.label){case 0:h.fy.logger.info("Saving Stamp",{platform:n.platformId}),j(!0),p.label=1;case 1:return p.trys.push([1,8,9,10]),e="".concat(n.path,"-")+(I=10,window.btoa(Array.from(window.crypto.getRandomValues(new Uint8Array(2*I))).map((function(e){return String.fromCharCode(e)})).join("")).replace(/[+/]/g,"").substring(0,I)),[4,n.getProviderPayload({state:e,window:window,screen:screen,userDid:g,callbackUrl:window.location.origin,waitForRedirect:X})];case 2:return"brightid"===(t=p.sent()).sessionKey?(J(t.code),[2]):(s=[],Q.length>0?[4,(0,x.fetchVerifiableCredential)("https://passport-iam.gitcoin.co/api/",{type:n.platformId,types:Q,version:"0.0.0",address:i||"",proofs:t,rpcUrl:"https://eth-mainnet.alchemyapi.io/v2/XNldLwed7BuXqNQWQCc5xFffgFz7YgCU"},a)]:[3,4]);case 3:if((r=p.sent()).credentials)for(o=function(e){var t,n=r.credentials[e];!n.error&&z.find((function(e){var t;return(null===n||void 0===n||null===(t=n.record)||void 0===t?void 0:t.type)===e}))&&s.push({provider:null===(t=n.record)||void 0===t?void 0:t.type,credential:n.credential})},l=0;l<r.credentials.length;l++)o(l);p.label=4;case 4:return[4,d(z)];case 5:return p.sent(),s.length>0?[4,c(s)]:[3,7];case 6:p.sent(),p.label=7;case 7:return h.fy.logger.info("Successfully saved Stamp",{platform:n.platformId}),u=z.filter((function(e){return!!s.find((function(t){var n,s;return(null===t||void 0===t||null===(n=t.credential)||void 0===n||null===(s=n.credentialSubject)||void 0===s?void 0:s.provider)===e}))})),H((0,f.Z)(u)),Y((0,f.Z)(u)),m=new Set(u),v=V(q,m),y=V(m,q),L(!1),(b=ee(m,v,y))===F.Failed&&n.isEVM&&T(!0),w=te(b,m,v,y),N=w.title,C=w.body,S=w.icon,P=w.platformId,$(N,C,S,P),j(!1),[3,10];case 8:throw k=p.sent(),h.fy.logger.error("Verification Error",{error:k,platform:n.platformId}),k;case 9:return j(!1),[7];case 10:return[2]}var I}))}));return function(){return e.apply(this,arguments)}}(),$=function(e,t,n,s){_({duration:5e3,isClosable:!0,render:function(o){return(0,r.jsx)(N,{title:e,body:t,icon:n,platformId:s,result:o})}})},ee=function(e,t,n){return n.size===z.length?F.AllVerified:e.size>0&&0===n.size&&0===t.size?F.ReVerified:n.size>0&&0===t.size?F.PartiallyVerified:t.size>0&&0===n.size&&0===Q.length?F.AllRemoved:t.size>0&&0===n.size?F.PartiallyRemoved:n.size>0&&t.size>0?F.PartiallyRemovedAndVerified:F.Failed},te=function(e,t,s,r){switch(e){case F.AllVerified:return{title:"Done!",body:"All ".concat(n.platformId," data points verified."),icon:U,platformId:n.platformId};case F.ReVerified:return{title:"Success!",body:"Successfully re-verified ".concat(n.platformId," data ").concat(r.size>1?"points":"point","."),icon:U,platformId:n.platformId};case F.PartiallyVerified:return{title:"Success!",body:"Successfully verified ".concat(n.platformId," data ").concat(s.size>1?"points":"point","."),icon:U,platformId:n.platformId};case F.AllRemoved:return{title:"Success!",body:"All ".concat(n.platformId," data points removed."),icon:U,platformId:n.platformId};case F.PartiallyRemoved:return{title:"Success!",body:"Successfully removed ".concat(n.platformId," data ").concat(t.size>1?"points":"point","."),icon:U,platformId:n.platformId};case F.PartiallyRemovedAndVerified:return{title:"Success!",body:"".concat(t.size," ").concat(n.platformId," data ").concat(t.size>1?"points":"point"," removed and ").concat(s.size," verified."),icon:U,platformId:n.platformId};case F.Failed:return{title:"Verification Failed",body:"Please make sure you fulfill the requirements for this stamp.",icon:"../../assets/verification-failed.svg",platformId:n.platformId}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{currentPlatform:(0,I.nE)(n.platformId),currentProviders:t,verifiedProviders:D,selectedProviders:Q,setSelectedProviders:Y,isLoading:y,infoElement:n.banner?(0,r.jsx)(S,{banner:n.banner}):void 0,verifyButton:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{disabled:!O,onClick:K,"data-testid":"button-verify-".concat(n.platformId),className:"sidebar-verify-btn",children:D.length>0?"Save":"Verify"})})}),(0,r.jsx)(B,{isOpen:R,onClose:function(){return T(!1)}})]})},Q=n(21084),Y=n(54145),q=function(e){var t=e.isOpen,n=e.onClose,s=e.title,o=e.subheading,i=e.jsonOutput,a=e.closeButtonText;return(0,r.jsxs)(g.u_,{isOpen:t,onClose:n,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsxs)(g.hz,{rounded:"none",padding:4,maxW:"80%",maxH:"80%",children:[(0,r.jsxs)(g.xB,{borderBottomWidth:2,borderBottomColor:"gray.200",children:[(0,r.jsx)("p",{className:"font-miriam-libre",children:s}),(0,r.jsx)("p",{className:"font-miriam-libre text-base font-normal",children:o})]}),(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{className:"font-miriam-libre overflow-auto",children:(0,r.jsx)("pre",{"data-testid":"passport-json",children:JSON.stringify(i,null,"\t")})}),(0,r.jsxs)(g.mz,{borderTopWidth:2,borderTopColor:"gray.200",children:[(0,r.jsxs)(Z.zx,{"data-testid":"button-passport-json-download",width:32,rounded:"base",mr:3,onClick:function(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,"\t"))),e.setAttribute("download","passport.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:[(0,r.jsx)("span",{children:(0,r.jsx)("svg",{width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 15C-2.41411e-08 14.4477 0.447715 14 1 14H13C13.5523 14 14 14.4477 14 15C14 15.5523 13.5523 16 13 16H1C0.447715 16 2.41411e-08 15.5523 0 15ZM3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L6 8.58579L6 1C6 0.447716 6.44771 2.41411e-08 7 0C7.55228 -2.41411e-08 8 0.447715 8 1L8 8.58579L9.29289 7.29289C9.68342 6.90237 10.3166 6.90237 10.7071 7.29289C11.0976 7.68342 11.0976 8.31658 10.7071 8.70711L7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",fill:"#111827"})})}),"\xa0",(0,r.jsx)("span",{className:"font-miriam-libre",children:"Download"})]}),(0,r.jsx)(Z.zx,{"data-testid":"button-passport-json-done",width:24,rounded:"base",colorScheme:"purple",mr:3,onClick:n,children:(0,r.jsx)("span",{className:"font-miriam-libre",children:a||"Done"})})]})]})]})},X=n(34896),J=function(e){var t=e.isOpen,n=e.onClose,s=e.title,i=e.body,a=e.closeButtonText,l=e.stampsToBeDeleted,c=e.handleDeleteStamps,d=(e.platformId,(0,o.useState)(!1)),u=d[0],f=d[1],h=(0,C.pm)(),x=function(){var e=(0,m.Z)((function(){return(0,p.__generator)(this,(function(e){switch(e.label){case 0:return f(!0),[4,c(l)];case 1:return e.sent(),h({duration:5e3,isClosable:!0,render:function(e){return(0,r.jsx)(N,{title:"Success!",body:"Stamp data has been removed.",icon:"../assets/check-icon.svg",result:e})}}),f(!1),n(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(g.u_,{isOpen:t,onClose:n,children:[(0,r.jsx)(g.ZA,{width:"100%",height:"100%"}),(0,r.jsxs)(g.hz,{rounded:"none",padding:5,maxW:{sm:"100%",md:"55%",xl:"45%"},maxH:"80%",children:[(0,r.jsxs)(g.xB,{children:[(0,r.jsx)("img",{alt:"shield alert",src:"../assets/shield-alert.svg",className:"m-auto mb-4 w-10"}),(0,r.jsx)("p",{className:"font-miriam-libre text-center",children:s})]}),(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{color:"#757087",className:"font-miriam-libre mb-10 overflow-auto text-center",children:i}),(0,r.jsxs)(X.Kq,{direction:["column","row"],align:"center",children:[(0,r.jsx)(Z.zx,{"data-testid":"button-stamp-removal-cancel",width:"50%",rounded:"base",onClick:n,backgroundColor:"#fff",borderWidth:1,borderColor:"#e6e4e9",children:(0,r.jsx)("span",{className:"font-miriam-libre",children:"Cancel"})}),(0,r.jsx)(Z.zx,{"data-testid":"button-stamp-removal",width:"50%",rounded:"base",colorScheme:"purple",onClick:x,isLoading:u,loadingText:"Removing Stamp",className:"font-miriam-libre",children:(0,r.jsx)("span",{className:"font-miriam-libre",children:a||"Remove Stamp"})})]})]})]})},K=function(e){var t,n=e.i,s=e.platform,i=e.selectedProviders,a=e.updatedPlatforms,l=e.btnRef,c=e.onOpen,u=e.setCurrentPlatform,m=e.getUpdatedPlatforms,f=(0,o.useContext)(P.oQ),p=f.allProvidersState,h=f.ceramicErrors,x=f.handleDeleteStamps,g=(0,Q.qY)(),v=g.isOpen,y=g.onOpen,j=g.onClose,b=(0,Q.qY)(),w=b.isOpen,N=b.onOpen,C=b.onClose;return(0,r.jsx)("div",{className:"w-1/2 p-2 md:w-1/2 xl:w-1/4",children:(0,r.jsxs)("div",{className:"relative flex h-full flex-col border border-gray-200 p-0",children:[(0,r.jsxs)("div",{className:"flex flex-row p-6",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 flex-grow justify-center md:justify-start",children:s.icon?(0,r.jsx)("img",{src:s.icon,alt:s.name,className:"h-10 w-10"}):(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.7999 24.8002H28.7999V28.8002H24.7999V24.8002ZM14 24.8002H18V28.8002H14V24.8002ZM3.19995 24.8002H7.19995V28.8002H3.19995V24.8002ZM24.7999 14.0002H28.7999V18.0002H24.7999V14.0002ZM14 14.0002H18V18.0002H14V14.0002ZM3.19995 14.0002H7.19995V18.0002H3.19995V14.0002ZM24.7999 3.2002H28.7999V7.2002H24.7999V3.2002ZM14 3.2002H18V7.2002H14V3.2002ZM3.19995 3.2002H7.19995V7.2002H3.19995V3.2002Z",fill:"#161616"})})}),a&&(null===s||void 0===s?void 0:s.enablePlatformCardUpdate)&&!0!==a[s.name]&&i[s.platform].length>0&&(0,r.jsx)("div",{className:"inline-flex h-6 items-center rounded-xl bg-yellow px-2 text-xs font-medium shadow-sm",children:"Update"})]}),(0,r.jsxs)("div",{className:"flex justify-center py-0 px-6 pb-6 md:block md:justify-start",children:[(0,r.jsx)("h1",{className:"title-font mb-0 text-lg font-medium text-gray-900 md:mb-3",children:s.name}),(0,r.jsx)("p",{className:"pleading-relaxed hidden md:inline-block",children:s.description})]}),(0,r.jsx)("div",{className:"mt-auto",children:i[s.platform].length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Y.v2,{children:[(0,r.jsx)(Y.j2,{disabled:null===h||void 0===h?void 0:h.error,className:"verify-btn flex","data-testid":"card-menu-button",children:(0,r.jsxs)("div",{className:"m-auto flex justify-center",children:[(0,r.jsx)("svg",{className:"m-1 mr-2",width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.449301 3.499C3.15674 3.46227 5.62356 2.42929 7.4998 0.75C9.37605 2.42929 11.8429 3.46227 14.5503 3.499C14.6486 4.0847 14.6998 4.68638 14.6998 5.30002C14.6998 10.0024 11.6945 14.0028 7.4998 15.4854C3.30511 14.0028 0.299805 10.0024 0.299805 5.30002C0.299805 4.68638 0.350982 4.0847 0.449301 3.499ZM10.8362 6.83638C11.1877 6.48491 11.1877 5.91506 10.8362 5.56359C10.4847 5.21212 9.91488 5.21212 9.56341 5.56359L6.5998 8.5272L5.4362 7.36359C5.08473 7.01212 4.51488 7.01212 4.16341 7.36359C3.81194 7.71506 3.81194 8.28491 4.16341 8.63638L5.96341 10.4364C6.31488 10.7879 6.88473 10.7879 7.2362 10.4364L10.8362 6.83638Z",fill:"#059669"})}),"Verified",(0,r.jsx)("svg",{className:"relative m-1 mt-2 pl-1",style:{top:"1px"},width:"11",height:"7",viewBox:"0 0 11 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29308C0.480314 1.10561 0.734622 1.00029 0.999786 1.00029C1.26495 1.00029 1.51926 1.10561 1.70679 1.29308L4.99979 4.58608L8.29279 1.29308C8.38503 1.19757 8.49538 1.12139 8.61738 1.06898C8.73939 1.01657 8.87061 0.988985 9.00339 0.987831C9.13616 0.986677 9.26784 1.01198 9.39074 1.06226C9.51364 1.11254 9.62529 1.18679 9.71918 1.28069C9.81307 1.37458 9.88733 1.48623 9.93761 1.60913C9.98789 1.73202 10.0132 1.8637 10.012 1.99648C10.0109 2.12926 9.9833 2.26048 9.93089 2.38249C9.87848 2.50449 9.8023 2.61483 9.70679 2.70708L5.70679 6.70708C5.51926 6.89455 5.26495 6.99987 4.99979 6.99987C4.73462 6.99987 4.48031 6.89455 4.29279 6.70708L0.292787 2.70708C0.105316 2.51955 0 2.26525 0 2.00008C0 1.73492 0.105316 1.48061 0.292787 1.29308Z",fill:"currentColor"})})]})}),(0,r.jsxs)(Y.qy,{children:[(0,r.jsx)(Y.sN,{onClick:y,"data-testid":"view-json",children:"View stamp JSON"}),(0,r.jsx)(Y.sN,{onClick:function(){u(s),c(),s.enablePlatformCardUpdate&&(0,k.Y3)(s.name),m()},"data-testid":"manage-stamp",children:"Manage stamp"}),(0,r.jsx)(Y.sN,{onClick:N,"data-testid":"remove-stamp",children:"Remove stamp"})]})]}),(0,r.jsx)(q,{isOpen:v,onClose:j,title:"".concat(s.name," JSON"),subheading:"You can find the ".concat(s.name," JSON data below"),jsonOutput:i[s.platform].map((function(e){var t,n;return null===(t=p[e])||void 0===t||null===(n=t.stamp)||void 0===n?void 0:n.credential}))}),(0,r.jsx)(J,{isOpen:w,onClose:C,title:"Remove ".concat(s.name," Stamp"),body:"This stamp will be removed from your Passport. You can still re-verify your stamp in the future.",stampsToBeDeleted:(null===(t=d.V[s.platform])||void 0===t?void 0:t.reduce((function(e,t){var n;return e.concat(null===(n=t.providers)||void 0===n?void 0:n.map((function(e){return e.name})))}),[]))||[],handleDeleteStamps:x,platformId:s.name})]}):(0,r.jsx)("button",{className:"verify-btn",disabled:null===h||void 0===h?void 0:h.error,ref:l.current,onClick:function(e){s.enablePlatformCardUpdate&&(0,k.Y3)(s.platform),u(s),c()},children:s.connectMessage})})]})},"".concat(s.name).concat(n))},$=function(e){var t=e.isLoading,n=void 0!==t&&t,s=(0,o.useContext)(P.oQ),i=s.allProvidersState,a=s.allPlatforms,l=(0,Q.qY)(),m=l.isOpen,f=l.onOpen,p=l.onClose,h=(0,o.useRef)(),x=(0,o.useState)(),v=x[0],y=x[1],j=(0,o.useState)([]),b=j[0],N=j[1],C=(0,o.useState)(),S=C[0],k=C[1],I=(0,o.useState)(c.reduce((function(e,t){var n,s=(null===(n=d.V[t.platform])||void 0===n?void 0:n.reduce((function(e,t){var n;return e.concat(null===(n=t.providers)||void 0===n?void 0:n.map((function(e){return e.name})))}),[]))||[];return e[t.platform]=s.filter((function(e){var t,n;return"undefined"!==typeof(null===(t=i[e])||void 0===t||null===(n=t.stamp)||void 0===n?void 0:n.credential)})),e}),{})),V=I[0],E=I[1],A=function(){var e=localStorage.getItem("updatedPlatforms");k(JSON.parse(e||"{}"))};(0,o.useEffect)((function(){E(c.reduce((function(e,t){var n,s=(null===(n=d.V[t.platform])||void 0===n?void 0:n.reduce((function(e,t){var n;return e.concat(null===(n=t.providers)||void 0===n?void 0:n.map((function(e){return e.name})))}),[]))||[];return e[t.platform]=s.filter((function(e){var t,n;return"undefined"!==typeof(null===(t=i[e])||void 0===t||null===(n=t.stamp)||void 0===n?void 0:n.credential)})),e}),{})),A()}),[i]);return(0,o.useEffect)((function(){v&&N(d.V[v.platform])}),[v]),(0,r.jsxs)("div",{className:"container mx-auto py-10",children:[(0,r.jsx)("div",{className:"flex flex-wrap md:-m-4 md:px-4",children:c.map((function(e,t){return n?(0,r.jsx)(u,{},t):(0,r.jsx)(K,{i:t,platform:e,btnRef:h,onOpen:f,selectedProviders:V,updatedPlatforms:S,getUpdatedPlatforms:A,setCurrentPlatform:y},t)}))}),b&&(0,r.jsxs)(g.dy,{isOpen:m,placement:"right",size:"sm",onClose:p,finalFocusRef:h.current,children:[(0,r.jsx)(g.P1,{}),function(){if(v){var e=a.get(v.platform);if(e)return(0,r.jsx)(W,{platform:e.platform,platFormGroupSpec:e.platFormGroupSpec})}return(0,r.jsx)(w,{verifiedProviders:void 0,selectedProviders:void 0,setSelectedProviders:void 0,currentPlatform:void 0,currentProviders:void 0,isLoading:void 0,verifyButton:void 0})}()]})]})},ee=n(51834),te=n(60241),ne=n(42045);function se(e){var t=e.children;return(0,r.jsx)("div",{className:"bg-purple-infoElementBG px-4 py-3",children:(0,r.jsx)("div",{className:"flex w-full flex-row items-center text-center",children:t})})}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.NOT_STARTED=2]="NOT_STARTED",e[e.ERROR=3]="ERROR"}(H||(H={}));var re=function(e){return(0,r.jsx)("span",{className:"step-icon step-icon-completed flex h-9 items-center",children:(0,r.jsx)("span",{className:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full bg-teal-600",children:(0,r.jsx)("img",{alt:"completed icon",className:"sticky top-0 h-6",src:e})})})},oe=(0,r.jsx)("span",{className:"step-icon step-icon-current Status flex h-9 items-center","aria-hidden":"true",children:(0,r.jsx)("span",{className:"step-icon-outer relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-indigo-600 bg-white",children:(0,r.jsx)("span",{className:"step-icon-inner rounded-full bg-indigo-600"})})}),ie=(0,r.jsx)("span",{className:"step-icon step-icon-waiting flex h-9 items-center","aria-hidden":"true",children:(0,r.jsx)("span",{className:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-gray-300 bg-white",children:(0,r.jsx)("span",{className:"h-2.5 w-2.5 rounded-full bg-transparent"})})}),ae=(0,r.jsx)("span",{className:"step-icon step-icon-error flex h-9 items-center",children:(0,r.jsx)("span",{className:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full bg-red-600",children:(0,r.jsx)("img",{alt:"error icon",className:"sticky top-0 h-6",src:"./assets/x-icon.svg"})})});function le(e){var t=e.step,n=e.isLastStep,s=(e.error,ie);switch(t.status){case H.SUCCESS:s=re("./assets/white-check-icon.svg");break;case H.NOT_STARTED:s=ie;break;case H.IN_PROGRESS:s=oe;break;case H.ERROR:s=ae}return(0,r.jsxs)("li",{className:"relative m-2","data-testid":"step-".concat(t.name),children:[!n&&(0,r.jsx)("div",{className:"absolute top-4 left-4 -ml-px mt-0.5 h-full w-0.5 bg-indigo-600","aria-hidden":"true"}),(0,r.jsxs)("div",{className:"group relative flex items-start",children:[s,(0,r.jsxs)("span",{className:"ml-4 flex min-w-0 flex-col",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:t.name}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:t.description})]})]})]})}function ce(e){var t=e.steps;e.error;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsx)("nav",{"aria-label":"Progress",children:(0,r.jsx)("ol",{className:"overflow-hidden",children:t.map((function(e){return(0,r.jsx)(le,{step:e,isLastStep:e.name===t[t.length-1].name},e.name)}))})})})})}var de=function(e){var t=e.isOpen,n=e.onClose,s=(0,o.useContext)(P.oQ),i=s.handleCheckRefreshPassport,a=s.userDid,l=(0,o.useState)(!1),c=l[0],d=l[1],u=(0,C.pm)(),x=(0,o.useState)([{name:"Connecting",description:"Connecting to Ceramic...",status:H.SUCCESS},{name:"Resetting",description:"Returning Passport to the last stable state...",status:H.NOT_STARTED}]),v=x[0],y=x[1],j=function(e,t){var n=(0,f.Z)(v);if(t)return n.slice(0,e).forEach((function(e){return e.status=H.SUCCESS})),n[e-1].status=H.ERROR,void y(n);n.slice(0,e).forEach((function(e){return e.status=H.SUCCESS})),n[e]&&(n[e].status=H.IN_PROGRESS),y(n)},b=function(){var e=(0,m.Z)((function(){return(0,p.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),j(1),h.fy.logger.info("RefreshStampModal - calling handleCheckRefreshPassport for did=".concat(a),{did:a}),[4,i()];case 1:return e.sent()?[3,3]:(h.fy.logger.error("RefreshStampModal - calling handleCheckRefreshPassport was not successfull for did=".concat(a),{did:a}),j(2,!0),[4,new Promise((function(e){return setTimeout(e,2e3)}))]);case 2:return e.sent(),d(!0),[3,5];case 3:return h.fy.logger.info("RefreshStampModal - calling handleCheckRefreshPassport was successfull for did=".concat(a),{did:a}),j(2),[4,new Promise((function(e){return setTimeout(e,2e3)}))];case 4:e.sent(),n(),u({duration:5e3,isClosable:!0,render:function(e){return(0,r.jsxs)("div",{className:"flex justify-between rounded-md bg-blue-darkblue p-4 text-white",children:[re("./assets/purple-check-icon.svg"),(0,r.jsx)("p",{className:"py-1 px-3",children:"Your Passport has been reset."}),(0,r.jsx)("button",{className:"sticky top-0",onClick:e.onClose,children:(0,r.jsx)("img",{alt:"close button",className:"rounded-lg hover:bg-gray-500",src:"./assets/x-icon.svg"})})]})}}),e.label=5;case 5:return[3,7];case 6:return e.sent(),j(2,!0),[3,7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){b()}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.u_,{isOpen:t,onClose:n,blockScrollOnMount:!1,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsx)(g.hz,{children:c?(0,r.jsxs)("div",{className:"m-4",children:[(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsx)("div",{className:"mt-2 w-fit rounded-full bg-pink-500/25",children:(0,r.jsx)("img",{className:"m-2",alt:"shield-exclamation-icon",src:"./assets/shield-exclamation-icon-warning.svg"})})}),(0,r.jsx)("p",{className:"m-1 text-center text-sm font-bold",children:"Reset Failed"}),(0,r.jsx)("p",{className:"m-1 mb-4 text-center",children:"We could not reset your Passport at the moment. Please try again or contact our support team."}),(0,r.jsxs)("div",{className:"flex w-full",children:[(0,r.jsx)("a",{href:"https://support.gitcoin.co/gitcoin-knowledge-base/misc/contact-us",target:"_blank",className:"m-1 w-1/2 items-center rounded-md border py-2 text-center",rel:"noreferrer",children:"Contact Support"}),(0,r.jsx)("button",{"data-testid":"check-other-wallet",className:"m-1 mx-auto flex w-1/2 justify-center rounded-md bg-purple-connectPurple py-2 text-white hover:bg-purple-200 hover:text-black",onClick:function(){d(!1),b()},children:"Try Again"})]})]}):(0,r.jsxs)("div",{className:"m-4",children:[(0,r.jsx)("p",{className:"m-2 font-semibold",children:"Resetting"}),(0,r.jsx)("p",{className:"m-2",children:"Please wait while we repair some parts of your Passport. This may take up to 5 minutes..."}),(0,r.jsx)(ce,{steps:v})]})})]})})};function ue(){var e=(0,o.useContext)(P.oQ),t=e.passport,n=e.isLoadingPassport,l=e.ceramicErrors,c=(0,o.useContext)(k.St),d=c.wallet,u=c.toggleConnection,m=c.handleDisconnection,f=(0,Q.qY)(),p=f.isOpen,h=f.onOpen,x=f.onClose,y=(0,i.s0)(),j=(0,s.Z)((0,te.bP)(),2),b=j[0],w=j[1],N=(0,Q.qY)(),C=N.isOpen,S=N.onOpen,I=N.onClose,V=(0,o.useState)(!1),E=V[0],A=V[1];(0,o.useEffect)((function(){d||y("/")}),[d]);(0,o.useEffect)((function(){n==P.QK.FailedToConnect&&S()}),[n]);var M=(0,r.jsxs)(g.u_,{isOpen:C,onClose:I,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsxs)(g.hz,{children:[(0,r.jsx)(g.fe,{mt:4,children:(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)("div",{className:"inline-flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-purple-100 sm:mr-10",children:(0,r.jsx)("img",{alt:"shield-exclamation-icon",src:"./assets/shield-exclamation-icon.svg"})}),(0,r.jsxs)("div",{className:"flex flex-col","data-testid":"retry-modal-content",children:[(0,r.jsx)("p",{className:"text-lg font-bold",children:"Ceramic Network Error"}),(0,r.jsx)("p",{children:"The Gitcoin Passport relies on the Ceramic Network which currently is having network issues. Please try again later."})]})]})}),(0,r.jsxs)(g.mz,{py:3,children:[(0,r.jsx)(Z.zx,{"data-testid":"retry-modal-try-again",variant:"outline",mr:2,onClick:function(){n==P.QK.FailedToConnect&&d&&(w(new ne.KS(d.provider,d.accounts[0].address.toLowerCase())),I())},children:"Try Again"}),(0,r.jsx)(Z.zx,{"data-testid":"retry-modal-close",colorScheme:"purple",onClick:function(){I(),u()},children:"Done"})]})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"invisible flex w-full flex-col flex-wrap border-b-2 p-5 md:visible md:flex-row",children:(0,r.jsxs)("div",{className:"float-right mb-4 flex h-12 flex-row items-center font-medium text-gray-900 md:mb-0",children:[(0,r.jsx)("img",{src:"/assets/gitcoinLogoDark.svg",alt:"Gitcoin Logo"}),(0,r.jsx)("img",{className:"ml-6 mr-6",src:"/assets/logoLine.svg",alt:"Logo Line"}),(0,r.jsx)(a.rU,{"data-testid":"passport-logo-link",to:"/",onClick:m,children:(0,r.jsx)("img",{src:"/assets/passportLogoBlack.svg",alt:"pPassport Logo"})})]})}),"connecting"===b.status&&(0,r.jsx)("div",{className:"top-unset absolute z-10 my-2 h-10 w-full md:top-10",children:(0,r.jsxs)("div",{className:"absolute left-2 right-2 rounded bg-blue-darkblue py-3 px-8 md:right-1/2 md:left-1/3 md:w-5/12 md:py-4 xl:w-1/4","data-testid":"selfId-connection-alert",children:[(0,r.jsxs)("span",{className:"absolute top-0 right-0 flex h-3 w-3 translate-x-1/2 -translate-y-1/2",children:[(0,r.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-jade opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex h-3 w-3 rounded-full bg-green-jade"})]}),(0,r.jsx)("span",{className:"font-bold text-green-jade",children:" Waiting for wallet signature..."})]})}),l&&l.error&&(0,r.jsx)(se,{children:(0,r.jsxs)("div",{className:"flex w-full justify-center",children:["We have detected some broken stamps in your passport. Your passport is currently locked because of this. We need to fix these errors before you continue using Passport. This might take up to 5 minutes.",(0,r.jsxs)("button",{className:"ml-2 flex underline",onClick:function(){return A(!0)},children:["Reset Passport ",(0,r.jsx)("img",{className:"ml-1 w-6",src:"./assets/arrow-right-icon.svg",alt:"arrow-right"})]})]})}),(0,r.jsxs)("div",{className:"container mx-auto flex flex-wrap-reverse px-2 md:mt-4 md:flex-wrap",children:[(0,r.jsxs)("div",{className:"md:w-3/5",children:[(0,r.jsx)("p",{className:"mb-4 text-2xl text-black",children:"My Stamps"}),(0,r.jsx)("p",{className:"text-xl text-black",children:"Gitcoin Passport is an identity aggregator that helps you build a digital identifier showcasing your unique humanity. Select the verification stamps you'd like to connect to start building your passport. The more verifications you have, the stronger your passport will be."})]}),"connecting"!==b.status&&(0,r.jsxs)("div",{className:"my-2 flex grow flex-row justify-between md:hidden",children:[(0,r.jsxs)("div",{className:"float-right mb-4 flex flex-row items-center font-medium text-gray-900 md:mb-0",children:[(0,r.jsx)("img",{src:"/assets/gitcoinLogoDark.svg",alt:"Gitcoin Logo"}),(0,r.jsx)("img",{className:"ml-6 mr-6",src:"/assets/logoLine.svg",alt:"Logo Line"}),(0,r.jsx)("img",{src:"/assets/passportLogoBlack.svg",alt:"pPassport Logo"})]}),t?(0,r.jsx)("button",{"data-testid":"button-passport-json-mobile",className:"float-right ml-auto rounded-md border-2 border-gray-300 py-2 px-4 text-black",onClick:h,children:"</>"}):(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"float-right flex flex-row items-center rounded-md border-2 border-gray-300 py-2 px-4 text-black md:px-6","data-testid":"loading-spinner-passport",children:(0,r.jsx)(v.$,{className:"my-[2px]",thickness:"2px",speed:"0.65s",emptyColor:"darkGray",color:"gray",size:"md"})})})]}),(0,r.jsxs)("div",{className:"w-full md:w-2/5",children:[n==P.QK.FailedToConnect&&M,"connecting"!==b.status&&(t?(0,r.jsxs)("div",{className:"hidden md:block",children:[(0,r.jsxs)("button",{"data-testid":"button-passport-json",className:"float-right rounded-md border-2 border-gray-300 py-2 px-4 text-black",onClick:h,children:["</>"," Passport JSON"]}),(0,r.jsx)(q,{isOpen:p,onClose:x,title:"Passport JSON",subheading:"You can find the Passport JSON data below",jsonOutput:t})]}):(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsxs)("div",{className:"float-right flex flex-row items-center rounded-md border-2 border-gray-300 py-2 px-4 text-black md:px-6","data-testid":"loading-spinner-passport-md",children:[(0,r.jsx)(v.$,{thickness:"2px",speed:"0.65s",emptyColor:"darkGray",color:"gray",size:"md"}),(0,r.jsx)("h1",{className:"mx-2",children:"Connecting"})]})}))]})]}),(0,r.jsx)($,{isLoading:n==P.QK.Loading||n==P.QK.FailedToConnect}),(0,r.jsx)(ee.$,{lightMode:!1}),E&&(0,r.jsx)(de,{isOpen:E,onClose:function(){return A(!1)}})]})}},33290:function(e,t){"use strict";t.VT=t.nE=void 0;t.nE=e=>{let n;return t.VT.forEach((t=>{t.platform===e&&(n=t)})),n},t.VT=[{icon:"./assets/gitcoinStampIcon.svg",platform:"Gitcoin",name:"Gitcoin Grants",description:"Connect with Github to verify with your Gitcoin account.",connectMessage:"Connect Account"},{icon:"./assets/gtcPossessionStampIcon.svg",platform:"GTC",name:"GTC",description:"GTC possession verification",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/gtcStakingLogoIcon.svg",platform:"GtcStaking",name:"GTC Staking",description:"Connect to passport to verify your staking amount.",connectMessage:"Verify amount",isEVM:!0},{icon:"./assets/twitterStampIcon.svg",platform:"Twitter",name:"Twitter",description:"Connect your existing Twitter account to verify.",connectMessage:"Connect Account"},{icon:"./assets/googleStampIcon.svg",platform:"Google",name:"Google",description:"Connect your existing Google Account to verify",connectMessage:"Connect Account"},{icon:"./assets/githubStampIcon.svg",platform:"Github",name:"Github",description:"Connect your existing Github account to verify.",connectMessage:"Connect Account"},{icon:"./assets/facebookStampIcon.svg",platform:"Facebook",name:"Facebook",description:"Connect your existing account to verify with Facebook.",connectMessage:"Connect Account"},{icon:"./assets/ensStampIcon.svg",platform:"Ens",name:"ENS",description:"Purchase an .eth name to verify/ connect your existing account.",connectMessage:"Connect Account",isEVM:!0},{icon:"./assets/poapStampIcon.svg",platform:"POAP",name:"POAP",description:"Connect an account to a POAP owned for over 15 days.",connectMessage:"Connect to POAP",isEVM:!0},{icon:"./assets/brightidStampIcon.svg",platform:"Brightid",name:"BrightID",description:"Connect your BrightID",connectMessage:"Connect Account",isEVM:!0},{icon:"./assets/pohStampIcon.svg",platform:"Poh",name:"Proof of Humanity",description:"Connect your wallet to start the process of verifying with Proof of Humanity.",connectMessage:"Connect Account",isEVM:!0},{icon:"./assets/discordStampIcon.svg",platform:"Discord",name:"Discord",description:"Connect your existing Discord account to verify.",connectMessage:"Connect Account"},{icon:"./assets/linkedinStampIcon.svg",platform:"Linkedin",name:"Linkedin",description:"Connect your existing Linkedin account to verify.",connectMessage:"Connect Account"},{icon:"./assets/ethereumStampIcon.svg",platform:"ETH",name:"ETH",description:"ETH possession and transaction verification",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/snapshotStampIcon.svg",platform:"Snapshot",name:"Snapshot",description:"Connect your existing account to verify with Snapshot.",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/gitPOAPStampIcon.svg",platform:"GitPOAP",name:"GitPOAP",description:"GitPOAP Verification",connectMessage:"Connect Account"},{icon:"./assets/nftStampIcon.svg",platform:"NFT",name:"NFT Holder",description:"Connect a wallet and validate the stamp by retrieving an NFT.",connectMessage:"Connect NFT"},{icon:"./assets/zksyncStampIcon.svg",platform:"ZkSync",name:"ZkSync",description:"ZkSync Verification",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/lensStampIcon.svg",platform:"Lens",name:"Lens",description:"Lens Profile Verification",connectMessage:"Verify Account",isEVM:!0},{icon:"./assets/gnosisSafeStampIcon.svg",platform:"GnosisSafe",name:"Gnosis Safe",description:"Gnosis Safe Signer/Owner Verification",connectMessage:"Verify Account"}]},65050:function(){}}]);